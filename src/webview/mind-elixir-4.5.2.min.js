/* eslint-disable */
/**
 * Minified by jsDelivr using Terser v5.39.0.
 * Original file: /npm/mind-elixir@4.5.2/dist/MindElixir.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
// prettier-ignore
!function(){"use strict";try{if(typeof document<"u"){var e=document.createElement("style");e.appendChild(document.createTextNode(".map-container{--gap: 30px;--root-radius: 30px;--main-radius: 20px;--root-color: #ffffff;--root-bgcolor: #4c4f69;--root-border-color: rgba(0, 0, 0, 0);--main-color: #444446;--main-bgcolor: #ffffff;--topic-padding: 3px;--color: #777777;--bgcolor: #f6f6f6;--selected: #4dc4ff;--panel-color: #444446;--panel-bgcolor: #ffffff;--panel-border-color: #eaeaea;-webkit-tap-highlight-color:rgba(0,0,0,0);font-family:-apple-system,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Microsoft YaHei,Source Han Sans SC,Noto Sans CJK SC,WenQuanYi Micro Hei,sans-serif;-webkit-user-select:none;user-select:none;height:100%;width:100%;overflow:scroll;font-size:15px}.map-container *{box-sizing:border-box}.map-container::-webkit-scrollbar{width:0px;height:0px}.map-container .selected{outline:2px solid var(--selected);outline-offset:1px}.map-container .hyper-link{text-decoration:none;margin-left:.3em}.map-container .lhs{direction:rtl}.map-container .lhs me-tpc{direction:ltr}.map-container .map-canvas{height:20000px;width:20000px;position:relative;-webkit-user-select:none;user-select:none;transition:transform .3s;transform:scale(1);background-color:var(--bgcolor)}.map-container .map-canvas me-nodes{position:absolute;display:flex;justify-content:center;align-items:center;height:fit-content;width:fit-content}.map-container .map-canvas me-root{position:relative}.map-container .map-canvas me-root me-tpc{display:block;font-size:25px;color:var(--root-color);padding:10px var(--gap);border-radius:var(--root-radius);border:var(--root-border-color) 2px solid;white-space:pre-wrap;background-color:var(--root-bgcolor)}.map-container me-main>me-wrapper{position:relative;margin:45px 65px}.map-container me-main>me-wrapper>me-parent{margin:10px;padding:0}.map-container me-main>me-wrapper>me-parent>me-tpc{border-radius:var(--main-radius);background-color:var(--main-bgcolor);border:2px solid var(--main-color);color:var(--main-color);padding:8px 25px}.map-container me-wrapper{display:block;pointer-events:none;width:fit-content}.map-container me-children,.map-container me-parent{display:inline-block;vertical-align:middle}.map-container me-parent{position:relative;cursor:pointer;padding:6px var(--gap);margin-top:10px}.map-container me-parent me-tpc{position:relative;display:block;border-radius:3px;color:var(--color);pointer-events:all;max-width:35em;white-space:pre-wrap;padding:var(--topic-padding)}.map-container me-parent me-tpc .insert-preview{position:absolute;width:100%;left:0;z-index:9}.map-container me-parent me-tpc .show{background:#7ad5ff;pointer-events:none;opacity:.7}.map-container me-parent me-tpc .before{height:14px;top:-14px}.map-container me-parent me-tpc .in{height:100%;top:0}.map-container me-parent me-tpc .after{height:14px;bottom:-14px}.map-container me-parent me-epd{position:absolute;height:18px;width:18px;opacity:.8;background-image:url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBzdGFuZGFsb25lPSJubyI/PjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+CjxzdmcgdD0iMTY1NjY1NDcxNzI0MiIgY2xhc3M9Imljb24iIHZpZXdCb3g9IjAgMCAxMDI0IDEwMjQiIHZlcnNpb249IjEuMSIKICAgIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIKICAgIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCI+CiAgICA8cGF0aCBkPSJNNTEyIDc0LjY2NjY2N0MyNzAuOTMzMzMzIDc0LjY2NjY2NyA3NC42NjY2NjcgMjcwLjkzMzMzMyA3NC42NjY2NjcgNTEyUzI3MC45MzMzMzMgOTQ5LjMzMzMzMyA1MTIgOTQ5LjMzMzMzMyA5NDkuMzMzMzMzIDc1My4wNjY2NjcgOTQ5LjMzMzMzMyA1MTIgNzUzLjA2NjY2NyA3NC42NjY2NjcgNTEyIDc0LjY2NjY2N3oiIHN0cm9rZS13aWR0aD0iNTQiIHN0cm9rZT0nYmxhY2snIGZpbGw9J3doaXRlJyA+PC9wYXRoPgogICAgPHBhdGggZD0iTTY4Mi42NjY2NjcgNDgwaC0xMzguNjY2NjY3VjM0MS4zMzMzMzNjMC0xNy4wNjY2NjctMTQuOTMzMzMzLTMyLTMyLTMycy0zMiAxNC45MzMzMzMtMzIgMzJ2MTM4LjY2NjY2N0gzNDEuMzMzMzMzYy0xNy4wNjY2NjcgMC0zMiAxNC45MzMzMzMtMzIgMzJzMTQuOTMzMzMzIDMyIDMyIDMyaDEzOC42NjY2NjdWNjgyLjY2NjY2N2MwIDE3LjA2NjY2NyAxNC45MzMzMzMgMzIgMzIgMzJzMzItMTQuOTMzMzMzIDMyLTMydi0xMzguNjY2NjY3SDY4Mi42NjY2NjdjMTcuMDY2NjY3IDAgMzItMTQuOTMzMzMzIDMyLTMycy0xNC45MzMzMzMtMzItMzItMzJ6Ij48L3BhdGg+Cjwvc3ZnPg==);background-repeat:no-repeat;background-size:contain;background-position:center;pointer-events:all;z-index:9}.map-container me-parent me-epd.minus{background-image:url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBzdGFuZGFsb25lPSJubyI/PjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+CjxzdmcgdD0iMTY1NjY1NTU2NDk4NSIgY2xhc3M9Imljb24iIHZpZXdCb3g9IjAgMCAxMDI0IDEwMjQiIHZlcnNpb249IjEuMSIKICAgIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIKICAgIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCI+CiAgICA8cGF0aCBkPSJNNTEyIDc0LjY2NjY2N0MyNzAuOTMzMzMzIDc0LjY2NjY2NyA3NC42NjY2NjcgMjcwLjkzMzMzMyA3NC42NjY2NjcgNTEyUzI3MC45MzMzMzMgOTQ5LjMzMzMzMyA1MTIgOTQ5LjMzMzMzMyA5NDkuMzMzMzMzIDc1My4wNjY2NjcgOTQ5LjMzMzMzMyA1MTIgNzUzLjA2NjY2NyA3NC42NjY2NjcgNTEyIDc0LjY2NjY2N3oiIHN0cm9rZS13aWR0aD0iNTQiIHN0cm9rZT0nYmxhY2snIGZpbGw9J3doaXRlJyA+PC9wYXRoPgogICAgPHBhdGggZD0iTTY4Mi42NjY2NjcgNTQ0SDM0MS4zMzMzMzNjLTE3LjA2NjY2NyAwLTMyLTE0LjkzMzMzMy0zMi0zMnMxNC45MzMzMzMtMzIgMzItMzJoMzQxLjMzMzMzNGMxNy4wNjY2NjcgMCAzMiAxNC45MzMzMzMgMzIgMzJzLTE0LjkzMzMzMyAzMi0zMiAzMnoiPjwvcGF0aD4KPC9zdmc+)!important;transition:opacity .3s;opacity:0}.map-container me-parent me-epd.minus:hover{opacity:.8}.map-container .icon{width:1em;height:1em;vertical-align:-.15em;fill:currentColor;overflow:hidden}.map-container .lines,.map-container .summary,.map-container .subLines,.map-container .topiclinks,.map-container .linkcontroller{position:absolute;height:102%;width:100%;top:0;left:0}.map-container .topiclinks,.map-container .linkcontroller,.map-container .summary{pointer-events:none}.map-container .topiclinks text,.map-container .linkcontroller text,.map-container .summary text{pointer-events:all}.map-container .topiclinks .selected,.map-container .linkcontroller .selected,.map-container .summary .selected{pointer-events:none}.map-container .lines,.map-container .subLines{pointer-events:none;z-index:-1}.map-container .topiclinks *,.map-container .linkcontroller *{z-index:100}.map-container .topiclinks g{cursor:pointer}.map-container #input-box{position:absolute;top:0;left:0;width:max-content;max-width:35em;z-index:11;direction:ltr;-webkit-user-select:auto;user-select:auto;pointer-events:auto;background-color:var(--bgcolor)}.map-container me-tpc>*{pointer-events:none}.map-container me-tpc>a,.map-container me-tpc>iframe{pointer-events:auto}.map-container me-tpc>img{display:block;margin-bottom:8px;object-fit:cover}.map-container me-tpc>.text{display:inline-block}.map-container .circle{position:absolute;height:10px;width:10px;margin-top:-5px;margin-left:-5px;border-radius:100%;background:#757575;border:2px solid #ffffff;cursor:pointer}.map-container .tags{direction:ltr}.map-container .tags span{display:inline-block;border-radius:3px;padding:2px 4px;background:#d6f0f8;color:#276f86;margin:2px 4px 0 0;font-size:12px;line-height:1.3em}.map-container .icons{display:inline-block;direction:ltr;margin-left:5px}.map-container .icons span{display:inline-block;line-height:1.3em}.map-container .mind-elixir-ghost{position:fixed;top:-100%;left:-100%;box-sizing:content-box;opacity:.5;background-color:var(--main-bgcolor);border:2px solid var(--main-color);color:var(--main-color);max-width:200px;width:fit-content;overflow:hidden;white-space:nowrap;text-overflow:ellipsis;padding:8px 16px;border-radius:6px}.map-container .selection-area{background:#4f90f22d;border:1px solid #4f90f2}.map-container .context-menu{position:fixed;top:0;left:0;width:100%;height:100%;z-index:99}.map-container .context-menu .menu-list{position:fixed;list-style:none;margin:0;padding:0;color:var(--panel-color);box-shadow:0 12px 15px #0003;border-radius:5px;overflow:hidden}.map-container .context-menu .menu-list li{min-width:200px;overflow:hidden;white-space:nowrap;padding:6px 10px;background:var(--panel-bgcolor);border-bottom:1px solid var(--panel-border-color);cursor:pointer}.map-container .context-menu .menu-list li span{line-height:20px}.map-container .context-menu .menu-list li a{color:#333;text-decoration:none}.map-container .context-menu .menu-list li.disabled{display:none}.map-container .context-menu .menu-list li:hover{filter:brightness(.95)}.map-container .context-menu .menu-list li:last-child{border-bottom:0}.map-container .context-menu .menu-list li span:last-child{float:right}.map-container .context-menu .key{font-size:10px;background-color:#f1f1f1;color:#333;padding:2px 5px;border-radius:3px}.map-container .tips{position:absolute;bottom:20px;left:50%;transform:translate(-50%);color:var(--panel-color);font-weight:bolder}.mind-elixir-toolbar{font-family:iconfont;position:absolute;color:var(--panel-color);background:var(--panel-bgcolor);padding:10px;border-radius:5px;box-shadow:0 1px 2px #0003}.mind-elixir-toolbar svg{display:inline-block}.mind-elixir-toolbar span:active{opacity:.5}.mind-elixir-toolbar.rb{right:20px;bottom:20px}.mind-elixir-toolbar.rb span+span{margin-left:10px}.mind-elixir-toolbar.lt{font-size:20px;left:20px;top:20px}.mind-elixir-toolbar.lt span{display:block}.mind-elixir-toolbar.lt span+span{margin-top:10px}")),document.head.appendChild(e);}}catch(e){console.error("vite-plugin-css-injected-by-js",e);}}(),function(e){var t,n,i,o,r,s,a='<svg><symbol id="icon-edit" viewBox="0 0 1024 1024"><path d="M423.765333 128a42.666667 42.666667 0 0 1 3.2 85.205333L423.765333 213.333333H234.666667a64 64 0 0 0-63.872 60.245334L170.666667 277.333333v512a64 64 0 0 0 60.245333 63.872L234.666667 853.333333h512a64 64 0 0 0 63.872-60.245333L810.666667 789.333333v-189.098666a42.666667 42.666667 0 0 1 85.205333-3.2l0.128 3.2V789.333333a149.333333 149.333333 0 0 1-144.213333 149.248L746.666667 938.666667h-512a149.333333 149.333333 0 0 1-149.248-144.213334L85.333333 789.333333v-512a149.333333 149.333333 0 0 1 144.213334-149.248L234.666667 128h189.098666z m324.949334-53.248a42.666667 42.666667 0 0 1 60.330666 0l150.869334 150.869333a42.666667 42.666667 0 0 1 0 60.330667l-329.386667 329.386667a42.666667 42.666667 0 0 1-29.44 12.458666l-153.386667 2.517334a42.666667 42.666667 0 0 1-43.349333-43.349334l2.56-153.386666a42.666667 42.666667 0 0 1 12.458667-29.44z m30.165333 90.496L491.946667 452.266667l-1.493334 91.989333 92.032-1.493333 286.976-286.976-90.538666-90.538667z"  ></path></symbol><symbol id="icon-rising" viewBox="0 0 1024 1024"><path d="M553.173333 803.84h-64l0.021334-474.581333-224.021334 224-45.269333-45.226667L521.6 206.293333l301.717333 301.696-45.269333 45.269334-224.853333-224.896v475.477333z"  ></path></symbol><symbol id="icon-falling" viewBox="0 0 1024 1024"><path d="M553.173333 238.314667h-64l0.021334 474.602666-224.021334-224-45.269333 45.226667L521.6 835.861333l301.717333-301.717333-45.269333-45.226667-224.853333 224.853334V238.336z"  ></path></symbol><symbol id="icon-shanchu2" viewBox="0 0 1024 1024"><path d="M516.60601807 107.93026734c-82.64382935 0-149.71865844 65.51751709-152.5729065 147.77160644H171.37136841c-21.40603638 0-38.92044068 17.38504028-38.92044068 38.92126465 0 21.40686036 17.38504028 38.92208862 38.92126466 38.92208862h42.94308471v435.40136719c0 81.73498536 55.39828492 148.55026245 123.90106201 148.55026245h348.99444581c68.37341309 0 123.90106201-66.42553711 123.901062-148.55026245V333.80477906h38.92126465c21.40686036 0 38.92126464-17.38586426 38.92126465-38.92208863 0-21.40686036-17.38504028-38.92126464-38.92126465-38.92126465H668.91854859C666.45321656 173.44860839 599.24902344 107.93109131 516.60601807 107.93109131z m-79.65939331 147.77160644c2.85424805-42.16442872 37.2354126-74.85809326 79.78875732-74.85809326s76.93450927 32.82302857 79.39984131 74.85809326H436.94662476z m-98.86047364 589.01165771c-24.2611084 0-50.98754883-31.13717651-50.98754883-75.76693725V333.80477906h450.97036744V769.33551026c0 44.50039673-26.72644043 75.76776123-50.98754884 75.76776122H338.08615112v-0.38973999z m0 0"  ></path><path d="M390.37063599 751.17263794c17.77313232 0 32.43411255-17.7739563 32.43411255-40.08883667V482.35504151c0-22.31488037-14.53079224-40.08966065-32.43411255-40.08966065-17.77478027 0-32.43493653 17.77478027-32.43493653 40.08966065v228.72875976c0 22.18469239 14.27124023 40.08883667 32.43493653 40.08883667z m117.41308594 0c17.7739563 0 32.43411255-17.7739563 32.43411255-40.08883667V482.35504151c0-22.31488037-14.53079224-40.08966065-32.43411255-40.08966065-17.7739563 0-32.43493653 17.77478027-32.43493653 40.08966065v228.72875976c0 22.18469239 14.66098023 40.08883667 32.43493653 40.08883667z m123.51049804 0c17.7739563 0 32.43493653-17.7739563 32.43493652-40.08883667V482.35504151c0-22.31488037-14.53079224-40.08966065-32.43493652-40.08966065-17.7739563 0-32.43411255 17.77478027-32.43411255 40.08966065v228.72875976c0 22.18469239 14.14105224 40.08883667 32.43411255 40.08883667z m0 0"  ></path></symbol><symbol id="icon-zijiedian" viewBox="0 0 1024 1024"><path d="M312.208 472c19.568-157.856 153.432-280 315.656-280 175.68 0 318.112 143.272 318.112 320S803.552 832 627.864 832c-162.224 0-296.08-122.144-315.656-280H120a40 40 0 0 1 0-80h192.208zM632 752c132.552 0 240-107.448 240-240 0-132.552-107.448-240-240-240-132.552 0-240 107.448-240 240 0 132.552 107.448 240 240 240z m-40-280v-80a40 40 0 0 1 80 0v80h80a40 40 0 0 1 0 80h-80v80a40 40 0 0 1-80 0v-80h-80a40 40 0 0 1 0-80h80z"  ></path></symbol><symbol id="icon-tongjijiedian-" viewBox="0 0 1024 1024"><path d="M803.84 131.626667H410.24A59.733333 59.733333 0 0 0 350.506667 192v45.226667H199.68a51.626667 51.626667 0 0 0-51.626667 51.626666v465.92a51.626667 51.626667 0 0 0 51.626667 51.626667h187.52v-55.466667h-162.133333a21.333333 21.333333 0 0 1-21.333334-21.333333V313.386667a21.333333 21.333333 0 0 1 21.333334-21.333334h125.653333v64a59.733333 59.733333 0 0 0 59.733333 59.733334h393.386667a59.733333 59.733333 0 0 0 59.733333-59.733334V192a59.733333 59.733333 0 0 0-59.733333-60.373333z m4.266667 224.64a4.266667 4.266667 0 0 1-4.266667 4.266666H410.24a4.266667 4.266667 0 0 1-4.266667-4.266666V192a4.266667 4.266667 0 0 1 4.266667-4.266667h393.6a4.266667 4.266667 0 0 1 4.266667 4.266667zM716.16 749.44h-81.28v-81.493333a27.733333 27.733333 0 0 0-55.466667 0v81.28h-81.493333a27.733333 27.733333 0 1 0 0 55.466666h81.28v81.28a27.733333 27.733333 0 1 0 55.466667 0v-81.066666h81.28a27.733333 27.733333 0 0 0 0-55.466667z"  ></path></symbol><symbol id="icon-close" viewBox="0 0 1024 1024"><path d="M557.312 513.248l265.28-263.904c12.544-12.48 12.608-32.704 0.128-45.248-12.512-12.576-32.704-12.608-45.248-0.128L512.128 467.904l-263.04-263.84c-12.448-12.48-32.704-12.544-45.248-0.064-12.512 12.48-12.544 32.736-0.064 45.28l262.976 263.776L201.6 776.8c-12.544 12.48-12.608 32.704-0.128 45.248a31.937 31.937 0 0 0 22.688 9.44c8.16 0 16.32-3.104 22.56-9.312l265.216-263.808 265.44 266.24c6.24 6.272 14.432 9.408 22.656 9.408a31.94 31.94 0 0 0 22.592-9.344c12.512-12.48 12.544-32.704 0.064-45.248L557.312 513.248z" fill="" ></path></symbol><symbol id="icon-menu" viewBox="0 0 1024 1024"><path d="M109.714 292.571h804.572c21.943 0 36.571-21.942 36.571-43.885 0-14.629-14.628-29.257-36.571-29.257H109.714c-21.943 0-36.571 14.628-36.571 36.571 0 14.629 14.628 36.571 36.571 36.571zM914.286 512H109.714c-21.943 0-36.571 14.629-36.571 36.571 0 14.629 14.628 36.572 36.571 36.572h804.572c21.943 0 36.571-21.943 36.571-43.886 0-14.628-14.628-29.257-36.571-29.257z m0 292.571H109.714c-21.943 0-36.571 14.629-36.571 36.572s14.628 36.571 36.571 36.571h804.572c21.943 0 36.571-21.943 36.571-36.571 0-21.943-14.628-36.572-36.571-36.572z"  ></path></symbol><symbol id="icon-right" viewBox="0 0 1024 1024"><path d="M385 560.69999999L385 738.9c0 36.90000001 26.4 68.5 61.3 68.5l150.2 0c1.5 0 3-0.1 4.5-0.3 10.2 38.7 45.5 67.3 87.5 67.3 50 0 90.5-40.5 90.5-90.5s-40.5-90.5-90.5-90.5c-42 0-77.3 28.6-87.5 67.39999999-1.4-0.3-2.9-0.4-4.5-0.39999999L446.3 760.4c-6.8 0-14.3-8.9-14.3-21.49999999l0-427.00000001c0-12.7 7.40000001-21.5 14.30000001-21.5l150.19999999 0c1.5 0 3-0.2 4.5-0.4 10.2 38.8 45.5 67.3 87.5 67.3 50 0 90.5-40.5 90.5-90.4 0-49.9-40.5-90.6-90.5-90.59999999-42 0-77.3 28.6-87.5 67.39999999-1.4-0.2-2.9-0.4-4.49999999-0.4L446.3 243.3c-34.80000001 0-61.3 31.6-61.3 68.50000001L385 513.7l-79.1 0c-10.4-38.5-45.49999999-67-87.4-67-50 0-90.5 40.5-90.5 90.5s40.5 90.5 90.5 90.5c41.79999999 0 77.00000001-28.4 87.4-67L385 560.69999999z" fill="" ></path></symbol><symbol id="icon-left" viewBox="0 0 1024 1024"><path d="M639 463.30000001L639 285.1c0-36.90000001-26.4-68.5-61.3-68.5l-150.2 0c-1.5 0-3 0.1-4.5 0.3-10.2-38.7-45.5-67.3-87.5-67.3-50 0-90.5 40.5-90.5 90.5s40.5 90.5 90.5 90.5c42 0 77.3-28.6 87.5-67.39999999 1.4 0.3 2.9 0.4 4.5 0.39999999L577.7 263.6c6.8 0 14.3 8.9 14.3 21.49999999l0 427.00000001c0 12.7-7.40000001 21.5-14.30000001 21.5l-150.19999999 0c-1.5 0-3 0.2-4.5 0.4-10.2-38.8-45.5-67.3-87.5-67.3-50 0-90.5 40.5-90.5 90.4 0 49.9 40.5 90.6 90.5 90.59999999 42 0 77.3-28.6 87.5-67.39999999 1.4 0.2 2.9 0.4 4.49999999 0.4L577.7 780.7c34.80000001 0 61.3-31.6 61.3-68.50000001L639 510.3l79.1 0c10.4 38.5 45.49999999 67 87.4 67 50 0 90.5-40.5 90.5-90.5s-40.5-90.5-90.5-90.5c-41.79999999 0-77.00000001 28.4-87.4 67L639 463.30000001z" fill="" ></path></symbol><symbol id="icon-side" viewBox="0 0 1024 1024"><path d="M851.91168 328.45312c-59.97056 0-108.6208 48.47104-108.91264 108.36992l-137.92768 38.4a109.14304 109.14304 0 0 0-63.46752-46.58688l1.39264-137.11872c47.29344-11.86816 82.31936-54.66624 82.31936-105.64096 0-60.15488-48.76288-108.91776-108.91776-108.91776s-108.91776 48.76288-108.91776 108.91776c0 49.18784 32.60928 90.75712 77.38368 104.27392l-1.41312 138.87488a109.19936 109.19936 0 0 0-63.50336 48.55808l-138.93632-39.48544 0.01024-0.72704c0-60.15488-48.76288-108.91776-108.91776-108.91776s-108.91776 48.75776-108.91776 108.91776c0 60.15488 48.76288 108.91264 108.91776 108.91264 39.3984 0 73.91232-20.92032 93.03552-52.2496l139.19232 39.552-0.00512 0.2304c0 25.8304 9.00096 49.5616 24.02816 68.23424l-90.14272 132.63872a108.7488 108.7488 0 0 0-34.2528-5.504c-60.15488 0-108.91776 48.768-108.91776 108.91776 0 60.16 48.76288 108.91776 108.91776 108.91776 60.16 0 108.92288-48.75776 108.92288-108.91776 0-27.14624-9.9328-51.968-26.36288-71.04l89.04704-131.03104a108.544 108.544 0 0 0 37.6832 6.70208 108.672 108.672 0 0 0 36.48512-6.272l93.13792 132.57216a108.48256 108.48256 0 0 0-24.69888 69.0688c0 60.16 48.768 108.92288 108.91776 108.92288 60.16 0 108.91776-48.76288 108.91776-108.92288 0-60.14976-48.75776-108.91776-108.91776-108.91776a108.80512 108.80512 0 0 0-36.69504 6.3488l-93.07136-132.48a108.48768 108.48768 0 0 0 24.79616-72.22784l136.09984-37.888c18.99008 31.93856 53.84192 53.3504 93.69088 53.3504 60.16 0 108.92288-48.75776 108.92288-108.91264-0.00512-60.15488-48.77312-108.92288-108.92288-108.92288z"  ></path></symbol><symbol id="icon-B" viewBox="0 0 1024 1024"><path d="M98.067692 65.457231H481.28c75.854769 0 132.411077 3.150769 169.668923 9.452307 37.336615 6.301538 70.656 19.534769 100.036923 39.620924 29.459692 20.007385 53.956923 46.710154 73.570462 80.029538 19.692308 33.398154 29.459692 70.734769 29.459692 112.167385 0 44.898462-12.130462 86.094769-36.233846 123.588923a224.886154 224.886154 0 0 1-98.461539 84.283077c58.368 17.092923 103.266462 46.08 134.695385 87.04 31.350154 40.96 47.025231 89.088 47.025231 144.462769 0 43.638154-10.082462 86.016-30.404923 127.212308-20.243692 41.196308-47.891692 74.043077-83.02277 98.697846-35.052308 24.654769-78.296615 39.778462-129.732923 45.449846-32.295385 3.465846-110.119385 5.671385-233.472 6.537846H98.067692V65.457231z m193.536 159.507692V446.621538h126.818462c75.460923 0 122.328615-1.024 140.603077-3.229538 33.083077-3.938462 59.155692-15.36 78.139077-34.343385 18.904615-18.904615 28.435692-43.874462 28.435692-74.830769 0-29.696-8.192-53.720615-24.497231-72.310154-16.384-18.510769-40.644923-29.696-72.940307-33.634461-19.140923-2.205538-74.279385-3.308308-165.415385-3.308308h-111.064615z m0 381.243077v256.315077h179.2c69.710769 0 113.979077-1.969231 132.726154-5.907692 28.750769-5.198769 52.145231-17.959385 70.262154-38.281847 18.116923-20.243692 27.096615-47.340308 27.096615-81.368615 0-28.750769-6.931692-53.169231-20.873846-73.255385a118.232615 118.232615 0 0 0-60.494769-43.795692c-26.387692-9.137231-83.574154-13.705846-171.638154-13.705846H291.603692z"  ></path></symbol><symbol id="icon-a" viewBox="0 0 1024 1024"><path d="M757.76 665.6q0 20.48 1.536 34.304t7.68 22.016 18.944 12.288 34.304 4.096q-3.072 25.6-15.36 44.032-11.264 16.384-33.28 29.696t-62.976 13.312q-11.264 0-20.48-0.512t-17.408-2.56l-6.144-2.048-1.024 0q-4.096-1.024-10.24-4.096-2.048-2.048-4.096-2.048-1.024-1.024-2.048-1.024-14.336-8.192-23.552-17.408t-14.336-17.408q-6.144-10.24-9.216-20.48-63.488 75.776-178.176 75.776-48.128 0-88.064-15.36t-69.12-44.032-45.056-68.096-15.872-88.576 16.896-89.088 47.616-67.584 74.24-42.496 96.768-14.848q48.128 0 88.576 17.408t66.048 49.152q0-8.192 0.512-16.384t0.512-15.36q0-71.68-39.936-104.448t-128-32.768q-43.008 0-84.992 6.656t-84.992 17.92q14.336-28.672 25.088-47.616t24.064-29.184q30.72-24.576 158.72-24.576 79.872 0 135.168 13.824t90.624 43.52 51.2 75.264 15.872 108.032l0 200.704zM487.424 743.424q50.176 0 79.872-33.28t29.696-95.744q0-61.44-28.672-93.696t-76.8-32.256q-52.224 0-82.944 33.28t-30.72 94.72q0 58.368 31.744 92.672t77.824 34.304z"  ></path></symbol><symbol id="icon-full" viewBox="0 0 1024 1024"><path d="M639.328 416c8.032 0 16.096-3.008 22.304-9.056l202.624-197.184-0.8 143.808c-0.096 17.696 14.144 32.096 31.808 32.192 0.064 0 0.128 0 0.192 0 17.6 0 31.904-14.208 32-31.808l1.248-222.208c0-0.672-0.352-1.248-0.384-1.92 0.032-0.512 0.288-0.896 0.288-1.408 0.032-17.664-14.272-32-31.968-32.032L671.552 96l-0.032 0c-17.664 0-31.968 14.304-32 31.968C639.488 145.632 653.824 160 671.488 160l151.872 0.224-206.368 200.8c-12.672 12.32-12.928 32.608-0.64 45.248C622.656 412.736 630.976 416 639.328 416z"  ></path><path d="M896.032 639.552 896.032 639.552c-17.696 0-32 14.304-32.032 31.968l-0.224 151.872-200.832-206.4c-12.32-12.64-32.576-12.96-45.248-0.64-12.672 12.352-12.928 32.608-0.64 45.248l197.184 202.624-143.808-0.8c-0.064 0-0.128 0-0.192 0-17.6 0-31.904 14.208-32 31.808-0.096 17.696 14.144 32.096 31.808 32.192l222.24 1.248c0.064 0 0.128 0 0.192 0 0.64 0 1.12-0.32 1.76-0.352 0.512 0.032 0.896 0.288 1.408 0.288l0.032 0c17.664 0 31.968-14.304 32-31.968L928 671.584C928.032 653.952 913.728 639.584 896.032 639.552z"  ></path><path d="M209.76 159.744l143.808 0.8c0.064 0 0.128 0 0.192 0 17.6 0 31.904-14.208 32-31.808 0.096-17.696-14.144-32.096-31.808-32.192L131.68 95.328c-0.064 0-0.128 0-0.192 0-0.672 0-1.248 0.352-1.888 0.384-0.448 0-0.8-0.256-1.248-0.256 0 0-0.032 0-0.032 0-17.664 0-31.968 14.304-32 31.968L96 352.448c-0.032 17.664 14.272 32 31.968 32.032 0 0 0.032 0 0.032 0 17.664 0 31.968-14.304 32-31.968l0.224-151.936 200.832 206.4c6.272 6.464 14.624 9.696 22.944 9.696 8.032 0 16.096-3.008 22.304-9.056 12.672-12.32 12.96-32.608 0.64-45.248L209.76 159.744z"  ></path><path d="M362.368 617.056l-202.624 197.184 0.8-143.808c0.096-17.696-14.144-32.096-31.808-32.192-0.064 0-0.128 0-0.192 0-17.6 0-31.904 14.208-32 31.808l-1.248 222.24c0 0.704 0.352 1.312 0.384 2.016 0 0.448-0.256 0.832-0.256 1.312-0.032 17.664 14.272 32 31.968 32.032L352.448 928c0 0 0.032 0 0.032 0 17.664 0 31.968-14.304 32-31.968s-14.272-32-31.968-32.032l-151.936-0.224 206.4-200.832c12.672-12.352 12.96-32.608 0.64-45.248S375.008 604.704 362.368 617.056z"  ></path></symbol><symbol id="icon-add" viewBox="0 0 1024 1024"><path d="M863.328 482.56l-317.344-1.12L545.984 162.816c0-17.664-14.336-32-32-32s-32 14.336-32 32l0 318.4L159.616 480.064c-0.032 0-0.064 0-0.096 0-17.632 0-31.936 14.24-32 31.904C127.424 529.632 141.728 544 159.392 544.064l322.592 1.152 0 319.168c0 17.696 14.336 32 32 32s32-14.304 32-32l0-318.944 317.088 1.12c0.064 0 0.096 0 0.128 0 17.632 0 31.936-14.24 32-31.904C895.264 496.992 880.96 482.624 863.328 482.56z"  ></path></symbol><symbol id="icon-move" viewBox="0 0 1024 1024"><path d="M863.744 544 163.424 544c-17.664 0-32-14.336-32-32s14.336-32 32-32l700.32 0c17.696 0 32 14.336 32 32S881.44 544 863.744 544z"  ></path></symbol><symbol id="icon-living" viewBox="0 0 1024 1024"><path d="M514.133333 488.533333m-106.666666 0a106.666667 106.666667 0 1 0 213.333333 0 106.666667 106.666667 0 1 0-213.333333 0Z" fill="" ></path><path d="M512 64C264.533333 64 64 264.533333 64 512c0 236.8 183.466667 428.8 416 445.866667v-134.4c-53.333333-59.733333-200.533333-230.4-200.533333-334.933334 0-130.133333 104.533333-234.666667 234.666666-234.666666s234.666667 104.533333 234.666667 234.666666c0 61.866667-49.066667 153.6-145.066667 270.933334l-59.733333 68.266666V960C776.533333 942.933333 960 748.8 960 512c0-247.466667-200.533333-448-448-448z" fill="" ></path></symbol></svg>',l=(l=document.getElementsByTagName("script"))[l.length-1].getAttribute("data-injectcss");if(l&&!e.__iconfont__svg__cssinject__){e.__iconfont__svg__cssinject__=!0;try{document.write("<style>.svgfont {display: inline-block;width: 1em;height: 1em;fill: currentColor;vertical-align: -0.1em;font-size:16px;}</style>");}catch{}}function c(){r||(r=!0,i());}t=function(){var e,t,n,i;(i=document.createElement("div")).innerHTML=a,a=null,(n=i.getElementsByTagName("svg")[0])&&(n.setAttribute("aria-hidden","true"),n.style.position="absolute",n.style.width=0,n.style.height=0,n.style.overflow="hidden",e=n,(t=document.body).firstChild?(i=e,(n=t.firstChild).parentNode.insertBefore(i,n)):t.appendChild(e));},document.addEventListener?~["complete","loaded","interactive"].indexOf(document.readyState)?setTimeout(t,0):(n=function(){document.removeEventListener("DOMContentLoaded",n,!1),t();},document.addEventListener("DOMContentLoaded",n,!1)):document.attachEvent&&(i=t,o=e.document,r=!1,(s=function(){try{o.documentElement.doScroll("left");}catch{return void setTimeout(s,50);}c();})(),o.onreadystatechange=function(){"complete"==o.readyState&&(o.onreadystatechange=null,c());});}(window);
const $ = 0,
  P = 1,
  ae = 2,
  Be = {
    name: "Latte",
    type: "light",
    palette: [
      "#dd7878",
      "#ea76cb",
      "#8839ef",
      "#e64553",
      "#fe640b",
      "#df8e1d",
      "#40a02b",
      "#209fb5",
      "#1e66f5",
      "#7287fd",
    ],
    cssVar: {
      "--gap": "30px",
      "--main-color": "#444446",
      "--main-bgcolor": "#ffffff",
      "--color": "#777777",
      "--bgcolor": "#f6f6f6",
      "--panel-color": "#444446",
      "--panel-bgcolor": "#ffffff",
      "--panel-border-color": "#eaeaea",
    },
  },
  Re = {
    name: "Dark",
    type: "dark",
    palette: [
      "#848FA0",
      "#748BE9",
      "#D2F9FE",
      "#4145A5",
      "#789AFA",
      "#706CF4",
      "#EF987F",
      "#775DD5",
      "#FCEECF",
      "#DA7FBC",
    ],
    cssVar: {
      "--main-color": "#ffffff",
      "--main-bgcolor": "#4c4f69",
      "--color": "#cccccc",
      "--bgcolor": "#252526",
      "--panel-color": "#ffffff",
      "--panel-bgcolor": "#2d3748",
      "--panel-border-color": "#696969",
    },
  };
function ie(e) {
  return e.replace(/&/g, "&amp;").replace(/</g, "&lt;").replace(/"/g, "&quot;");
}
const se = function (e, t) {
    if (t.id === e) {
      return t;
    }
    if (t.children && t.children.length) {
      for (let n = 0; n < t.children.length; n++) {
        const i = se(e, t.children[n]);
        if (i) {
          return i;
        }
      }
      return null;
    }
    return null;
  },
  B = (e, t) => {
    if (((e.parent = t), e.children)) {
      for (let t = 0; t < e.children.length; t++) {
        B(e.children[t], e);
      }
    }
  };
function pe(e) {
  if (((e.id = U()), e.children)) {
    for (let t = 0; t < e.children.length; t++) {
      pe(e.children[t]);
    }
  }
}
function re(e, t, n, i) {
  const o = i - t,
    r = e - n;
  let s = (Math.atan(Math.abs(o) / Math.abs(r)) / 3.14) * 180;
  r < 0 && o > 0 && (s = 180 - s),
    r < 0 && o < 0 && (s = 180 + s),
    r > 0 && o < 0 && (s = 360 - s);
  const a = s + 30,
    l = s - 30;
  return {
    x1: n + 12 * Math.cos((Math.PI * a) / 180),
    y1: i - 12 * Math.sin((Math.PI * a) / 180),
    x2: n + 12 * Math.cos((Math.PI * l) / 180),
    y2: i - 12 * Math.sin((Math.PI * l) / 180),
  };
}
function U() {
  return (
    new Date().getTime().toString(16) + Math.random().toString(16).substr(2)
  ).substr(2, 16);
}
const nt = function () {
  const e = U();
  return { topic: this.newTopicName, id: e };
};
function me(e) {
  return JSON.parse(
    JSON.stringify(e, (e, t) => {
      if ("parent" !== e) {
        return t;
      }
    })
  );
}
const R = (e, t) => {
    let n = 0,
      i = 0;
    for (; t && t !== e; ) {
      (n += t.offsetLeft), (i += t.offsetTop), (t = t.offsetParent);
    }
    return { offsetLeft: n, offsetTop: i };
  },
  C = (e, t) => {
    for (const n in t) {
      e.setAttribute(n, t[n]);
    }
  },
  he = (e) => !!e && "ME-TPC" === e.tagName,
  de = (e) =>
    e.filter((t) => {
      for (let n = 0; n < e.length; n++) {
        if (t !== e[n] && e[n].parentElement.parentElement.contains(t)) {
          return !1;
        }
      }
      return !0;
    }),
  k = {
    moved: !1,
    mousedown: !1,
    onMove(e, t) {
      if (this.mousedown) {
        this.moved = !0;
        const n = e.movementX,
          i = e.movementY,
          { container: o, map: r, scaleVal: s } = t;
        let a = o.scrollLeft - n,
          l = o.scrollTop - i;
        if (s < 1) {
          const e = (o.scrollWidth - r.clientWidth * s) / 2,
            t = (o.scrollHeight - r.clientHeight * s) / 2;
          (a = Math.max(e, Math.min(o.scrollWidth - e - o.clientWidth, a))),
            (l = Math.max(t, Math.min(o.scrollHeight - t - o.clientHeight, l)));
        }
        o.scrollTo(a, l);
      }
    },
    clear() {
      setTimeout(() => {
        (this.moved = !1), (this.mousedown = !1);
      }, 0);
    },
  };
function ot(e) {
  e.map.addEventListener("click", (t) => {
    var n, i;
    if (0 !== t.button) {
      return;
    }
    if (null != (n = e.helper1) && n.moved) {
      return void e.helper1.clear();
    }
    if (null != (i = e.helper2) && i.moved) {
      return void e.helper2.clear();
    }
    if (k.moved) {
      return void k.clear();
    }
    e.clearSelection();
    const o = t.target;
    if ("ME-EPD" === o.tagName) {
      e.expandNode(o.previousSibling);
    } else if (he(o)) {
      e.selectNode(o, !1, t);
    } else {
      if (!e.editable) {
        return;
      }
      "text" === o.tagName
        ? "custom-link" === o.dataset.type
          ? e.selectArrow(o.parentElement)
          : e.selectSummary(o.parentElement)
        : o.className;
    }
  }),
    e.map.addEventListener("dblclick", (t) => {
      if (!e.editable) {
        return;
      }
      const n = t.target;
      he(n)
        ? e.beginEdit(n)
        : "text" === n.tagName &&
          ("custom-link" === n.dataset.type
            ? e.editArrowLabel(n.parentElement)
            : e.editSummary(n.parentElement));
    }),
    e.map.addEventListener("mousemove", (t) => {
      "inherit" === t.target.contentEditable && k.onMove(t, e);
    }),
    e.map.addEventListener("mousedown", (t) => {
      const n = 0 === e.mouseSelectionButton ? 2 : 0;
      t.button === n &&
        "inherit" === t.target.contentEditable &&
        ((k.moved = !1), (k.mousedown = !0));
    }),
    e.map.addEventListener("mouseleave", (t) => {
      const n = 0 === e.mouseSelectionButton ? 2 : 0;
      t.button === n && k.clear();
    }),
    e.map.addEventListener("mouseup", (t) => {
      const n = 0 === e.mouseSelectionButton ? 2 : 0;
      t.button === n && k.clear();
    });
}
const it = {
  create: () => ({
    handlers: {},
    showHandler: function () {},
    addListener: function (e, t) {
      void 0 === this.handlers[e] && (this.handlers[e] = []),
        this.handlers[e].push(t);
    },
    fire: function (e, ...t) {
      if (this.handlers[e] instanceof Array) {
        const n = this.handlers[e];
        for (let e = 0; e < n.length; e++) {
          n[e](...t);
        }
      }
    },
    removeListener: function (e, t) {
      if (!this.handlers[e]) {
        return;
      }
      const n = this.handlers[e];
      if (t) {
        if (n.length) {
          for (let i = 0; i < n.length; i++) {
            n[i] === t && this.handlers[e].splice(i, 1);
          }
        }
      } else {
        n.length = 0;
      }
    },
  }),
};
var L = ((e) => ((e.LHS = "lhs"), (e.RHS = "rhs"), e))(L || {});
const ce = document,
  st = function () {
    this.nodes.innerHTML = "";
    const e = this.createTopic(this.nodeData);
    ge(e, this.nodeData), (e.draggable = !1);
    const t = ce.createElement("me-root");
    t.appendChild(e);
    const n = this.nodeData.children || [];
    if (2 === this.direction) {
      let e = 0,
        t = 0;
      n.map((n) => {
        0 === n.direction
          ? (e += 1)
          : 1 === n.direction
          ? (t += 1)
          : e <= t
          ? ((n.direction = 0), (e += 1))
          : ((n.direction = 1), (t += 1));
      });
    }
    rt(this, n, t);
  },
  rt = function (e, t, n) {
    const i = ce.createElement("me-main");
    i.className = L.LHS;
    const o = ce.createElement("me-main");
    o.className = L.RHS;
    for (let n = 0; n < t.length; n++) {
      const r = t[n],
        { grp: s } = e.createWrapper(r);
      2 === e.direction
        ? 0 === r.direction
          ? i.appendChild(s)
          : o.appendChild(s)
        : 0 === e.direction
        ? i.appendChild(s)
        : o.appendChild(s);
    }
    e.nodes.appendChild(i),
      e.nodes.appendChild(n),
      e.nodes.appendChild(o),
      e.nodes.appendChild(e.lines);
  },
  ct = function (e, t) {
    const n = ce.createElement("me-children");
    for (let i = 0; i < t.length; i++) {
      const o = t[i],
        { grp: r } = e.createWrapper(o);
      n.appendChild(r);
    }
    return n;
  },
  T = document,
  S = (e, t) => {
    const n = (t ? t.mindElixirBox : T).querySelector(`[data-nodeid=me${e}]`);
    if (!n) {
      throw new Error(`FindEle: Node ${e} not found, maybe it's collapsed.`);
    }
    return n;
  },
  ge = function (e, t) {
    if (
      ((e.innerHTML = ""),
      t.style &&
        ((e.style.color = t.style.color || ""),
        (e.style.background = t.style.background || ""),
        (e.style.fontSize = t.style.fontSize + "px"),
        (e.style.fontWeight = t.style.fontWeight || "normal")),
      t.dangerouslySetInnerHTML)
    ) {
      e.innerHTML = t.dangerouslySetInnerHTML;
    } else {
      if (t.image) {
        const n = t.image;
        if (n.url && n.width && n.height) {
          const t = T.createElement("img");
          (t.src = n.url),
            (t.style.width = n.width + "px"),
            (t.style.height = n.height + "px"),
            n.fit && (t.style.objectFit = n.fit),
            e.appendChild(t),
            (e.image = t);
        }
      } else {
        e.image && (e.image = void 0);
      }
      {
        const n = T.createElement("span");
        (n.className = "text"),
          (n.textContent = t.topic),
          e.appendChild(n),
          (e.text = n);
      }
      if (t.hyperLink) {
        const n = T.createElement("a");
        (n.className = "hyper-link"),
          (n.target = "_blank"),
          (n.innerText = "🔗"),
          (n.href = t.hyperLink),
          e.appendChild(n),
          (e.link = n);
      } else {
        e.link && (e.link = void 0);
      }
      if (t.icons && t.icons.length) {
        const n = T.createElement("span");
        (n.className = "icons"),
          (n.innerHTML = t.icons.map((e) => `<span>${ie(e)}</span>`).join("")),
          e.appendChild(n),
          (e.icons = n);
      } else {
        e.icons && (e.icons = void 0);
      }
      if (t.tags && t.tags.length) {
        const n = T.createElement("div");
        (n.className = "tags"),
          (n.innerHTML = t.tags.map((e) => `<span>${ie(e)}</span>`).join("")),
          e.appendChild(n),
          (e.tags = n);
      } else {
        e.tags && (e.tags = void 0);
      }
    }
  },
  lt = function (e, t) {
    const n = T.createElement("me-wrapper"),
      { p: i, tpc: o } = this.createParent(e);
    if ((n.appendChild(i), !t && e.children && e.children.length > 0)) {
      const t = ve(e.expanded);
      if ((i.appendChild(t), !1 !== e.expanded)) {
        const t = ct(this, e.children);
        n.appendChild(t);
      }
    }
    return { grp: n, top: i, tpc: o };
  },
  at = function (e) {
    const t = T.createElement("me-parent"),
      n = this.createTopic(e);
    return ge(n, e), t.appendChild(n), { p: t, tpc: n };
  },
  dt = function (e) {
    const t = T.createElement("me-children");
    return t.append(...e), t;
  },
  ht = function (e) {
    const t = T.createElement("me-tpc");
    return (
      (t.nodeObj = e),
      (t.dataset.nodeid = "me" + e.id),
      (t.draggable = this.draggable),
      t
    );
  };
function ze(e) {
  const t = T.createRange();
  t.selectNodeContents(e);
  const n = window.getSelection();
  n && (n.removeAllRanges(), n.addRange(t));
}
const ut = function (e) {
    if (!e) {
      return;
    }
    const t = T.createElement("div"),
      n = e.text.textContent;
    e.appendChild(t),
      (t.id = "input-box"),
      (t.textContent = n),
      (t.contentEditable = "plaintext-only"),
      (t.spellcheck = !1);
    const i = getComputedStyle(e);
    (t.style.cssText = `min-width:${e.offsetWidth - 8}px;\n  color:${
      i.color
    };\n  padding:${i.padding};\n  margin:${i.margin};\n  font:${
      i.font
    };\n  background-color:${
      "rgba(0, 0, 0, 0)" !== i.backgroundColor && i.backgroundColor
    };\n  border-radius:${i.borderRadius};`),
      0 === this.direction && (t.style.right = "0"),
      t.focus(),
      ze(t),
      this.bus.fire("operation", { name: "beginEdit", obj: e.nodeObj }),
      t.addEventListener("keydown", (e) => {
        e.stopPropagation();
        const n = e.key;
        if ("Enter" === n || "Tab" === n) {
          if (e.shiftKey) {
            return;
          }
          e.preventDefault(), t.blur(), this.map.focus();
        }
      }),
      t.addEventListener("blur", () => {
        var i;
        if (!t) {
          return;
        }
        const o = e.nodeObj,
          r = (null == (i = t.textContent) ? void 0 : i.trim()) || "";
        (o.topic = "" === r ? n : r),
          t.remove(),
          r !== n &&
            ((e.text.textContent = o.topic),
            this.linkDiv(),
            this.bus.fire("operation", {
              name: "finishEdit",
              obj: o,
              origin: n,
            }));
      });
  },
  ve = function (e) {
    const t = T.createElement("me-epd");
    return (t.expanded = !1 !== e), (t.className = !1 !== e ? "minus" : ""), t;
  },
  K = document,
  Z = "http://www.w3.org/2000/svg",
  Fe = function (e, t, n) {
    const i = K.createElementNS(Z, "path");
    return (
      C(i, { d: e, stroke: t || "#666", fill: "none", "stroke-width": n }), i
    );
  },
  J = function (e) {
    const t = K.createElementNS(Z, "svg");
    return t.setAttribute("class", e), t.setAttribute("overflow", "visible"), t;
  },
  Ne = function () {
    const e = K.createElementNS(Z, "line");
    return (
      e.setAttribute("stroke", "#bbb"),
      e.setAttribute("fill", "none"),
      e.setAttribute("stroke-width", "2"),
      e
    );
  },
  ft = function (e, t, n) {
    const i = {
        stroke: "rgb(235, 95, 82)",
        fill: "none",
        "stroke-linecap": "cap",
        "stroke-width": "2",
      },
      o = K.createElementNS(Z, "g");
    return (
      [e, t, n].forEach((e, t) => {
        const n = K.createElementNS(Z, "path"),
          r = { d: e, ...i };
        C(n, r),
          0 === t && n.setAttribute("stroke-dasharray", "8,2"),
          o.appendChild(n);
      }),
      o
    );
  },
  qe = function (e, t, n) {
    if (!t) {
      return;
    }
    const i = K.createElement("div");
    e.nodes.appendChild(i);
    const o = t.innerHTML;
    (i.id = "input-box"),
      (i.textContent = o),
      (i.contentEditable = "plaintext-only"),
      (i.spellcheck = !1);
    const r = t.getBBox();
    (i.style.cssText = `\n    min-width:${Math.max(
      88,
      r.width
    )}px;\n    position:absolute;\n    left:${r.x}px;\n    top:${
      r.y
    }px;\n    padding: 2px 4px;\n    margin: -2px -4px; \n  `),
      i.focus(),
      ze(i),
      i.addEventListener("keydown", (t) => {
        t.stopPropagation();
        const n = t.key;
        if ("Enter" === n || "Tab" === n) {
          if (t.shiftKey) {
            return;
          }
          t.preventDefault(), i.blur(), e.map.focus();
        }
      }),
      i.addEventListener("blur", () => {
        i && n(i);
      });
  },
  pt = function (e) {
    const t = this.map.querySelector("me-root"),
      n = t.offsetTop,
      i = t.offsetLeft,
      o = t.offsetWidth,
      r = t.offsetHeight,
      s = this.map.querySelector("me-nodes").offsetWidth;
    (this.nodes.style.top = 1e4 - this.nodes.offsetHeight / 2 + "px"),
      "root" === this.alignment
        ? (this.nodes.style.left = 1e4 - i - o / 2 + "px")
        : (this.nodes.style.left = 1e4 - s / 2 + "px");
    const a = this.map.querySelectorAll("me-main > me-wrapper");
    this.lines.innerHTML = "";
    for (let t = 0; t < a.length; t++) {
      const s = a[t],
        l = s.querySelector("me-tpc"),
        { offsetLeft: c, offsetTop: d } = R(this.nodes, l),
        h = l.offsetWidth,
        p = l.offsetHeight,
        m = s.parentNode.className,
        u = this.generateMainBranch({
          pT: n,
          pL: i,
          pW: o,
          pH: r,
          cT: d,
          cL: c,
          cW: h,
          cH: p,
          direction: m,
          containerHeight: this.nodes.offsetHeight,
        }),
        f = this.theme.palette,
        g = l.nodeObj.branchColor || f[t % f.length];
      (l.style.borderColor = g), this.lines.appendChild(Fe(u, g, "3"));
      const v = s.children[0].children[1];
      if (
        (v &&
          ((v.style.top =
            (v.parentNode.offsetHeight - v.offsetHeight) / 2 + "px"),
          m === L.LHS ? (v.style.left = "-10px") : (v.style.right = "-10px")),
        e && e !== s)
      ) {
        continue;
      }
      const b = J("subLines"),
        y = s.lastChild;
      "svg" === y.tagName && y.remove(),
        s.appendChild(b),
        Ve(this, b, g, s, m, !0);
    }
    this.renderArrow(), this.renderSummary(), this.bus.fire("linkDiv");
  },
  Ve = function (e, t, n, i, o, r) {
    const s = i.firstChild,
      a = i.children[1].children;
    if (0 === a.length) {
      return;
    }
    const l = s.offsetTop,
      c = s.offsetLeft,
      d = s.offsetWidth,
      h = s.offsetHeight;
    for (let i = 0; i < a.length; i++) {
      const s = a[i],
        p = s.firstChild,
        m = p.offsetTop,
        u = p.offsetLeft,
        f = p.offsetWidth,
        g = p.offsetHeight,
        v = p.firstChild.nodeObj.branchColor || n,
        b = e.generateSubBranch({
          pT: l,
          pL: c,
          pW: d,
          pH: h,
          cT: m,
          cL: u,
          cW: f,
          cH: g,
          direction: o,
          isFirst: r,
        });
      t.appendChild(Fe(b, v, "2"));
      const y = p.children[1];
      y &&
        ((y.style.bottom = -y.offsetHeight / 2 + "px"),
        o === L.LHS
          ? (y.style.left = "10px")
          : o === L.RHS && (y.style.right = "10px"),
        y.expanded && Ve(e, t, v, s, o));
    }
  },
  Ce = {
    addChild: "插入子节点",
    addParent: "插入父节点",
    addSibling: "插入同级节点",
    removeNode: "删除节点",
    focus: "专注",
    cancelFocus: "取消专注",
    moveUp: "上移",
    moveDown: "下移",
    link: "连接",
    clickTips: "请点击目标节点",
    summary: "摘要",
  },
  Se = {
    cn: Ce,
    zh_CN: Ce,
    zh_TW: {
      addChild: "插入子節點",
      addParent: "插入父節點",
      addSibling: "插入同級節點",
      removeNode: "刪除節點",
      focus: "專注",
      cancelFocus: "取消專注",
      moveUp: "上移",
      moveDown: "下移",
      link: "連接",
      clickTips: "請點擊目標節點",
      summary: "摘要",
    },
    en: {
      addChild: "Add child",
      addParent: "Add parent",
      addSibling: "Add sibling",
      removeNode: "Remove node",
      focus: "Focus Mode",
      cancelFocus: "Cancel Focus Mode",
      moveUp: "Move up",
      moveDown: "Move down",
      link: "Link",
      clickTips: "Please click the target node",
      summary: "Summary",
    },
    ru: {
      addChild: "Добавить дочерний элемент",
      addParent: "Добавить родительский элемент",
      addSibling: "Добавить на этом уровне",
      removeNode: "Удалить узел",
      focus: "Режим фокусировки",
      cancelFocus: "Отменить режим фокусировки",
      moveUp: "Поднять выше",
      moveDown: "Опустить ниже",
      link: "Ссылка",
      clickTips: "Пожалуйста, нажмите на целевой узел",
      summary: "Описание",
    },
    ja: {
      addChild: "子ノードを追加する",
      addParent: "親ノードを追加します",
      addSibling: "兄弟ノードを追加する",
      removeNode: "ノードを削除",
      focus: "集中",
      cancelFocus: "集中解除",
      moveUp: "上へ移動",
      moveDown: "下へ移動",
      link: "コネクト",
      clickTips: "ターゲットノードをクリックしてください",
      summary: "概要",
    },
    pt: {
      addChild: "Adicionar item filho",
      addParent: "Adicionar item pai",
      addSibling: "Adicionar item irmao",
      removeNode: "Remover item",
      focus: "Modo Foco",
      cancelFocus: "Cancelar Modo Foco",
      moveUp: "Mover para cima",
      moveDown: "Mover para baixo",
      link: "Link",
      clickTips: "Favor clicar no item alvo",
      summary: "Resumo",
    },
    it: {
      addChild: "Aggiungi figlio",
      addParent: "Aggiungi genitore",
      addSibling: "Aggiungi fratello",
      removeNode: "Rimuovi nodo",
      focus: "Modalità Focus",
      cancelFocus: "Annulla Modalità Focus",
      moveUp: "Sposta su",
      moveDown: "Sposta giù",
      link: "Collega",
      clickTips: "Si prega di fare clic sul nodo di destinazione",
      summary: "Unisci nodi",
    },
    es: {
      addChild: "Agregar hijo",
      addParent: "Agregar padre",
      addSibling: "Agregar hermano",
      removeNode: "Eliminar nodo",
      focus: "Modo Enfoque",
      cancelFocus: "Cancelar Modo Enfoque",
      moveUp: "Mover hacia arriba",
      moveDown: "Mover hacia abajo",
      link: "Enlace",
      clickTips: "Por favor haga clic en el nodo de destino",
      summary: "Resumen",
    },
    fr: {
      addChild: "Ajout enfant",
      addParent: "Ajout parent",
      addSibling: "Ajout voisin",
      removeNode: "Supprimer",
      focus: "Cibler",
      cancelFocus: "Retour",
      moveUp: "Monter",
      moveDown: "Descendre",
      link: "Lier",
      clickTips: "Cliquer sur le noeud cible",
      summary: "Annoter",
    },
    ko: {
      addChild: "자식 추가",
      addParent: "부모 추가",
      addSibling: "형제 추가",
      removeNode: "노드 삭제",
      focus: "포커스 모드",
      cancelFocus: "포커스 모드 취소",
      moveUp: "위로 이동",
      moveDown: "아래로 이동",
      link: "연결",
      clickTips: "대상 노드를 클릭하십시오",
      summary: "요약",
    },
  };
function mt(e, t) {
  const n = (e, t, n) => {
      const i = document.createElement("li");
      return (
        (i.id = e),
        (i.innerHTML = `<span>${ie(t)}</span><span ${
          n ? 'class="key"' : ""
        }>${ie(n)}</span>`),
        i
      );
    },
    i = Se[e.locale] ? e.locale : "en",
    o = Se[i],
    r = n("cm-add_child", o.addChild, "Tab"),
    s = n("cm-add_parent", o.addParent, "Ctrl + Enter"),
    a = n("cm-add_sibling", o.addSibling, "Enter"),
    l = n("cm-remove_child", o.removeNode, "Delete"),
    c = n("cm-fucus", o.focus, ""),
    d = n("cm-unfucus", o.cancelFocus, ""),
    h = n("cm-up", o.moveUp, "PgUp"),
    p = n("cm-down", o.moveDown, "Pgdn"),
    m = n("cm-link", o.link, ""),
    u = n("cm-link-bidirectional", "Bidreactional Link", ""),
    f = n("cm-summary", o.summary, ""),
    g = document.createElement("ul");
  if (
    ((g.className = "menu-list"),
    g.appendChild(r),
    g.appendChild(s),
    g.appendChild(a),
    g.appendChild(l),
    (!t || t.focus) && (g.appendChild(c), g.appendChild(d)),
    g.appendChild(h),
    g.appendChild(p),
    g.appendChild(f),
    (!t || t.link) && (g.appendChild(m), g.appendChild(u)),
    t && t.extend)
  ) {
    for (let e = 0; e < t.extend.length; e++) {
      const i = t.extend[e],
        o = n(i.name, i.name, i.key || "");
      g.appendChild(o),
        (o.onclick = (e) => {
          i.onclick(e);
        });
    }
  }
  const v = document.createElement("div");
  (v.className = "context-menu"),
    v.appendChild(g),
    (v.hidden = !0),
    e.container.append(v);
  let b = !0;
  (e.container.oncontextmenu = function (t) {
    if ((t.preventDefault(), !e.editable || k.moved)) {
      return;
    }
    const n = t.target;
    if (he(n)) {
      (b = "ME-ROOT" === n.parentElement.tagName),
        b
          ? ((c.className = "disabled"),
            (h.className = "disabled"),
            (p.className = "disabled"),
            (s.className = "disabled"),
            (a.className = "disabled"),
            (l.className = "disabled"))
          : ((c.className = ""),
            (h.className = ""),
            (p.className = ""),
            (s.className = ""),
            (a.className = ""),
            (l.className = "")),
        e.currentNodes || e.selectNode(n),
        (v.hidden = !1),
        k.mousedown && (k.mousedown = !1),
        (g.style.top = ""),
        (g.style.bottom = ""),
        (g.style.left = ""),
        (g.style.right = "");
      const i = g.getBoundingClientRect(),
        o = g.offsetHeight,
        r = g.offsetWidth,
        d = t.clientY - i.top,
        m = t.clientX - i.left;
      o + d > window.innerHeight
        ? ((g.style.top = ""), (g.style.bottom = "0px"))
        : ((g.style.bottom = ""), (g.style.top = d + 15 + "px")),
        r + m > window.innerWidth
          ? ((g.style.left = ""), (g.style.right = "0px"))
          : ((g.style.right = ""), (g.style.left = m + 10 + "px"));
    }
  }),
    (v.onclick = (e) => {
      e.target === v && (v.hidden = !0);
    }),
    (r.onclick = () => {
      e.addChild(), (v.hidden = !0);
    }),
    (s.onclick = () => {
      e.insertParent(), (v.hidden = !0);
    }),
    (a.onclick = () => {
      b || (e.insertSibling("after"), (v.hidden = !0));
    }),
    (l.onclick = () => {
      b || (e.removeNode(), (v.hidden = !0));
    }),
    (c.onclick = () => {
      b || (e.focusNode(e.currentNode), (v.hidden = !0));
    }),
    (d.onclick = () => {
      e.cancelFocus(), (v.hidden = !0);
    }),
    (h.onclick = () => {
      b || (e.moveUpNode(), (v.hidden = !0));
    }),
    (p.onclick = () => {
      b || (e.moveDownNode(), (v.hidden = !0));
    });
  const y = (t) => {
    v.hidden = !0;
    const n = e.currentNode,
      i = ((e) => {
        const t = document.createElement("div");
        return (t.innerText = e), (t.className = "tips"), t;
      })(o.clickTips);
    e.container.appendChild(i),
      e.map.addEventListener(
        "click",
        (o) => {
          o.preventDefault(), i.remove();
          const r = o.target;
          ("ME-PARENT" === r.parentElement.tagName ||
            "ME-ROOT" === r.parentElement.tagName) &&
            e.createArrow(n, r, t);
        },
        { once: !0 }
      );
  };
  return (
    (m.onclick = () => y()),
    (u.onclick = () => y({ bidirectional: !0 })),
    (f.onclick = () => {
      (v.hidden = !0), e.createSummary(), e.unselectNodes();
    }),
    () => {
      (r.onclick = null),
        (s.onclick = null),
        (a.onclick = null),
        (l.onclick = null),
        (c.onclick = null),
        (d.onclick = null),
        (h.onclick = null),
        (p.onclick = null),
        (m.onclick = null),
        (f.onclick = null),
        (v.onclick = null),
        (e.container.oncontextmenu = null);
    }
  );
}
const gt = (e) => {
    const t = e.map.querySelectorAll(".lhs>me-wrapper>me-parent>me-tpc");
    e.selectNode(t[Math.ceil(t.length / 2) - 1]);
  },
  vt = (e) => {
    const t = e.map.querySelectorAll(".rhs>me-wrapper>me-parent>me-tpc");
    e.selectNode(t[Math.ceil(t.length / 2) - 1]);
  },
  bt = (e) => {
    e.selectNode(e.map.querySelector("me-root>me-tpc"));
  },
  yt = function (e, t) {
    const n = t.parentElement.parentElement.parentElement.previousSibling;
    if (n) {
      const t = n.firstChild;
      e.selectNode(t);
    }
  },
  xt = function (e, t) {
    const n = t.parentElement.nextSibling;
    if (n && n.firstChild) {
      const t = n.firstChild.firstChild.firstChild;
      e.selectNode(t);
    }
  },
  _e = function (e, t) {
    var n, i;
    const o = e.currentNode || (null == (n = e.currentNodes) ? void 0 : n[0]);
    if (!o) {
      return;
    }
    const r = o.nodeObj,
      s = o.offsetParent.offsetParent.parentElement;
    r.parent
      ? s.className === t
        ? xt(e, o)
        : null != (i = r.parent) && i.parent
        ? yt(e, o)
        : bt(e)
      : t === L.LHS
      ? gt(e)
      : vt(e);
  },
  Le = function (e, t) {
    var n;
    const i = e.currentNode || (null == (n = e.currentNodes) ? void 0 : n[0]);
    if (!i || !i.nodeObj.parent) {
      return;
    }
    const o = t + "Sibling",
      r = i.parentElement.parentElement[o];
    r && e.selectNode(r.firstChild.firstChild);
  },
  ee = function (e, t) {
    switch (t) {
      case "in":
        if (e.scaleVal > 1.6) {
          return;
        }
        e.scale((e.scaleVal += 0.2));
        break;
      case "out":
        if (e.scaleVal < 0.6) {
          return;
        }
        e.scale((e.scaleVal -= 0.2));
    }
  };
function wt(e) {
  const t = () => {
      e.currentArrow
        ? e.removeArrow()
        : e.currentSummary
        ? e.removeSummary(e.currentSummary.summaryObj.id)
        : e.currentNode
        ? e.removeNode()
        : e.currentNodes && e.removeNodes(e.currentNodes);
    },
    n = {
      Enter: (t) => {
        t.shiftKey
          ? e.insertSibling("before")
          : t.ctrlKey
          ? e.insertParent()
          : e.insertSibling("after");
      },
      Tab: () => {
        e.addChild();
      },
      F1: () => {
        e.toCenter();
      },
      F2: () => {
        e.beginEdit();
      },
      ArrowUp: (t) => {
        if (t.altKey) {
          e.moveUpNode();
        } else {
          if (t.metaKey || t.ctrlKey) {
            return e.initSide();
          }
          Le(e, "previous");
        }
      },
      ArrowDown: (t) => {
        t.altKey ? e.moveDownNode() : Le(e, "next");
      },
      ArrowLeft: (t) => {
        if (t.metaKey || t.ctrlKey) {
          return e.initLeft();
        }
        _e(e, L.LHS);
      },
      ArrowRight: (t) => {
        if (t.metaKey || t.ctrlKey) {
          return e.initRight();
        }
        _e(e, L.RHS);
      },
      PageUp: () => e.moveUpNode(),
      PageDown: () => {
        e.moveDownNode();
      },
      c: (t) => {
        (t.metaKey || t.ctrlKey) &&
          (e.currentNode
            ? (e.waitCopy = [e.currentNode])
            : e.currentNodes && (e.waitCopy = e.currentNodes));
      },
      x: (n) => {
        (n.metaKey || n.ctrlKey) &&
          (e.currentNode
            ? (e.waitCopy = [e.currentNode])
            : e.currentNodes && (e.waitCopy = e.currentNodes),
          t());
      },
      v: (t) => {
        !e.waitCopy ||
          !e.currentNode ||
          ((t.metaKey || t.ctrlKey) &&
            (1 === e.waitCopy.length
              ? e.copyNode(e.waitCopy[0], e.currentNode)
              : e.copyNodes(e.waitCopy, e.currentNode)));
      },
      "+": (t) => {
        (t.metaKey || t.ctrlKey) && ee(e, "in");
      },
      "-": (t) => {
        (t.metaKey || t.ctrlKey) && ee(e, "out");
      },
      0: (t) => {
        (t.metaKey || t.ctrlKey) && e.scale(1);
      },
      Delete: t,
      Backspace: t,
    };
  (e.map.onkeydown = (t) => {
    if ((t.preventDefault(), !e.editable || t.target !== t.currentTarget)) {
      return;
    }
    const i = n[t.key];
    i && i(t);
  }),
    (e.map.onwheel = (t) => {
      (t.ctrlKey || t.metaKey) &&
        (t.preventDefault(),
        t.deltaY < 0 ? ee(e, "in") : e.scaleVal - 0.2 > 0 && ee(e, "out"),
        t.stopPropagation());
    });
}
const ue = document,
  Et = function (e, t) {
    if (!t) {
      return fe(e), e;
    }
    let n = e.querySelector(".insert-preview");
    const i = `insert-preview ${t} show`;
    return (
      n || ((n = ue.createElement("div")), e.appendChild(n)),
      (n.className = i),
      e
    );
  },
  fe = function (e) {
    if (!e) {
      return;
    }
    const t = e.querySelectorAll(".insert-preview");
    for (const e of t || []) {
      e.remove();
    }
  },
  Me = function (e, t) {
    for (const n of t) {
      const t = n.parentElement.parentElement.contains(e);
      if (!e || "ME-TPC" !== e.tagName || e === n || t || !e.nodeObj.parent) {
        return !1;
      }
    }
    return !0;
  },
  Nt = function (e) {
    const t = document.createElement("div");
    return (t.className = "mind-elixir-ghost"), e.map.appendChild(t), t;
  };
function Ct(e) {
  let t = null,
    n = null,
    i = null;
  const o = Nt(e);
  e.map.addEventListener("dragstart", (n) => {
    var i;
    const r = n.target;
    if ("ME-TPC" === (null == r ? void 0 : r.tagName)) {
      (null != (i = e.currentNodes) && i.includes(r)) ||
        (e.unselectNodes(), e.selectNode(r)),
        e.currentNodes
          ? ((t = e.currentNodes), (o.innerHTML = e.currentNodes.length + ""))
          : ((t = [r]), (o.innerHTML = r.innerHTML));
      for (const e of t) {
        e.parentElement.parentElement.style.opacity = "0.5";
      }
      n.dataTransfer.setDragImage(o, 0, 0),
        (n.dataTransfer.dropEffect = "move"),
        k.clear();
    } else {
      n.preventDefault();
    }
  }),
    e.map.addEventListener("dragend", async (o) => {
      if (!t) {
        return;
      }
      for (const e of t) {
        e.parentElement.parentElement.style.opacity = "1";
      }
      (o.target.style.opacity = ""),
        i &&
          (fe(i),
          "before" === n
            ? e.moveNodeBefore(t, i)
            : "after" === n
            ? e.moveNodeAfter(t, i)
            : "in" === n && e.moveNodeIn(t, i),
          (t = null));
    }),
    e.map.addEventListener("dragover", function (e) {
      if ((e.preventDefault(), !t)) {
        return;
      }
      fe(i);
      const o = ue.elementFromPoint(e.clientX, e.clientY - 12);
      if (Me(o, t)) {
        i = o;
        const t = o.getBoundingClientRect().y;
        n = e.clientY > t + o.clientHeight ? "after" : "in";
      } else {
        const o = ue.elementFromPoint(e.clientX, e.clientY + 12);
        if (Me(o, t)) {
          i = o;
          const t = o.getBoundingClientRect().y;
          n = e.clientY < t ? "before" : "in";
        } else {
          n = i = null;
        }
      }
      i && Et(i, n);
    });
}
const St = function (e) {
  return ["createSummary", "removeSummary", "finishEditSummary"].includes(
    e.name
  )
    ? { type: "summary", value: e.obj.id }
    : ["createArrow", "removeArrow", "finishEditArrowLabel"].includes(e.name)
    ? { type: "arrow", value: e.obj.id }
    : [
        "removeNodes",
        "copyNodes",
        "moveNodeBefore",
        "moveNodeAfter",
        "moveNodeIn",
      ].includes(e.name)
    ? { type: "nodes", value: e.objs.map((e) => e.id) }
    : { type: "node", value: e.obj.id };
};
function _t(e) {
  let t = [],
    n = -1,
    i = e.getData();
  e.bus.addListener("operation", (o) => {
    if ("beginEdit" === o.name) {
      return;
    }
    t = t.slice(0, n + 1);
    const r = e.getData();
    t.push({ prev: i, currentObject: St(o), next: r }),
      (i = r),
      (n = t.length - 1);
  }),
    (e.undo = function () {
      if (n > -1) {
        const o = t[n];
        (i = o.prev), e.refresh(o.prev);
        try {
          "node" === o.currentObject.type
            ? e.selectNode(S(o.currentObject.value))
            : "nodes" === o.currentObject.type &&
              e.selectNodes(o.currentObject.value.map((e) => S(e)));
        } catch {
        } finally {
          n--;
        }
      }
    }),
    (e.redo = function () {
      if (n < t.length - 1) {
        n++;
        const o = t[n];
        (i = o.next),
          e.refresh(o.next),
          "node" === o.currentObject.type
            ? e.selectNode(S(o.currentObject.value))
            : "nodes" === o.currentObject.type &&
              e.selectNodes(o.currentObject.value.map((e) => S(e)));
      }
    }),
    e.map.addEventListener("keydown", (t) => {
      (t.metaKey || t.ctrlKey) &&
      ((t.shiftKey && "Z" === t.key) || "y" === t.key)
        ? e.redo()
        : (t.metaKey || t.ctrlKey) && "z" === t.key && e.undo();
    });
}
const q = (e, t) => {
  const n = document.createElement("span");
  return (
    (n.id = e),
    (n.innerHTML = `<svg class="icon" aria-hidden="true">\n    <use xlink:href="#icon-${t}"></use>\n  </svg>`),
    n
  );
};
function Lt(e) {
  const t = document.createElement("div"),
    n = q("fullscreen", "full"),
    i = q("toCenter", "living"),
    o = q("zoomout", "move"),
    r = q("zoomin", "add");
  return (
    (document.createElement("span").innerText = "100%"),
    t.appendChild(n),
    t.appendChild(i),
    t.appendChild(o),
    t.appendChild(r),
    (t.className = "mind-elixir-toolbar rb"),
    (n.onclick = () => {
      e.mindElixirBox.requestFullscreen();
    }),
    (i.onclick = () => {
      e.toCenter();
    }),
    (o.onclick = () => {
      e.scaleVal < 0.6 || e.scale(e.scaleVal - 0.2);
    }),
    (r.onclick = () => {
      e.scaleVal > 1.6 || e.scale(e.scaleVal + 0.2);
    }),
    t
  );
}
function Mt(e) {
  const t = document.createElement("div"),
    n = q("tbltl", "left"),
    i = q("tbltr", "right"),
    o = q("tblts", "side");
  return (
    t.appendChild(n),
    t.appendChild(i),
    t.appendChild(o),
    (t.className = "mind-elixir-toolbar lt"),
    (n.onclick = () => {
      e.initLeft();
    }),
    (i.onclick = () => {
      e.initRight();
    }),
    (o.onclick = () => {
      e.initSide();
    }),
    t
  );
}
function kt(e) {
  e.container.append(Lt(e)), e.container.append(Mt(e));
  /*! @viselect/vanilla v3.5.1 MIT | https://github.com/Simonwep/selection/tree/master/packages/vanilla */
}
var Tt = Object.defineProperty,
  At = (e, t, n) =>
    t in e
      ? Tt(e, t, { enumerable: !0, configurable: !0, writable: !0, value: n })
      : (e[t] = n),
  N = (e, t, n) => (At(e, "symbol" !== typeof t ? t + "" : t, n), n);
class $t {
  constructor() {
    N(this, "_listeners", new Map()),
      N(this, "on", this.addEventListener),
      N(this, "off", this.removeEventListener),
      N(this, "emit", this.dispatchEvent);
  }
  addEventListener(e, t) {
    const n = this._listeners.get(e) ?? new Set();
    return this._listeners.set(e, n), n.add(t), this;
  }
  removeEventListener(e, t) {
    var n;
    return null == (n = this._listeners.get(e)) || n.delete(t), this;
  }
  dispatchEvent(e, ...t) {
    let n = !0;
    for (const i of this._listeners.get(e) ?? []) {
      n = !1 !== i(...t) && n;
    }
    return n;
  }
  unbindAllListeners() {
    this._listeners.clear();
  }
}
const ke = (e, t = "px") => ("number" === typeof e ? e + t : e);
function O({ style: e }, t, n) {
  if ("object" === typeof t) {
    for (const [n, i] of Object.entries(t)) {
      void 0 !== i && (e[n] = ke(i));
    }
  } else {
    void 0 !== n && (e[t] = ke(n));
  }
}
const We =
    (e) =>
    (t, n, i, o = {}) => {
      t instanceof HTMLCollection || t instanceof NodeList
        ? (t = Array.from(t))
        : Array.isArray(t) || (t = [t]),
        Array.isArray(n) || (n = [n]);
      for (const r of t) {
        if (r) {
          for (const t of n) {
            r[e](t, i, { capture: !1, ...o });
          }
        }
      }
      return [t, n, i, o];
    },
  V = We("addEventListener"),
  H = We("removeEventListener"),
  te = (e) => {
    var t;
    const {
      clientX: n,
      clientY: i,
      target: o,
    } = (null == (t = e.touches) ? void 0 : t[0]) ?? e;
    return { x: n, y: i, target: o };
  };
function Te(e, t, n = "touch") {
  switch (n) {
    case "center": {
      const n = t.left + t.width / 2,
        i = t.top + t.height / 2;
      return n >= e.left && n <= e.right && i >= e.top && i <= e.bottom;
    }
    case "cover":
      return (
        t.left >= e.left &&
        t.top >= e.top &&
        t.right <= e.right &&
        t.bottom <= e.bottom
      );
    case "touch":
      return (
        e.right >= t.left &&
        e.left <= t.right &&
        e.bottom >= t.top &&
        e.top <= t.bottom
      );
  }
}
function W(e, t = document) {
  const n = Array.isArray(e) ? e : [e];
  let i = [];
  for (let e = 0, o = n.length; e < o; e++) {
    const o = n[e];
    "string" === typeof o
      ? (i = i.concat(Array.from(t.querySelectorAll(o))))
      : o instanceof Element && i.push(o);
  }
  return i;
}
const jt = () => matchMedia("(hover: none), (pointer: coarse)").matches,
  Dt = () => "safari" in window,
  Ot = (e) => {
    let t,
      n = -1,
      i = !1;
    return {
      next(...o) {
        (t = o),
          i ||
            ((i = !0),
            (n = requestAnimationFrame(() => {
              e(...t), (i = !1);
            })));
      },
      cancel() {
        cancelAnimationFrame(n), (i = !1);
      },
    };
  };
function Ht(e, t) {
  for (const n of t) {
    if ("number" === typeof n) {
      return e.button === n;
    }
    if ("object" === typeof n) {
      const t = n.button === e.button,
        i = n.modifiers.every((t) => {
          switch (t) {
            case "alt":
              return e.altKey;
            case "ctrl":
              return e.ctrlKey || e.metaKey;
            case "shift":
              return e.shiftKey;
          }
        });
      return t && i;
    }
  }
  return !1;
}
const { abs: F, max: Ae, min: $e, ceil: je } = Math;
class Ie extends $t {
  constructor(e) {
    var t, n, i, o, r;
    super(),
      N(this, "_options"),
      N(this, "_selection", {
        stored: [],
        selected: [],
        touched: [],
        changed: { added: [], removed: [] },
      }),
      N(this, "_area"),
      N(this, "_clippingElement"),
      N(this, "_targetElement"),
      N(this, "_targetRect"),
      N(this, "_selectables", []),
      N(this, "_latestElement"),
      N(this, "_areaRect", new DOMRect()),
      N(this, "_areaLocation", { y1: 0, x2: 0, y2: 0, x1: 0 }),
      N(this, "_singleClick", !0),
      N(this, "_frame"),
      N(this, "_scrollAvailable", !0),
      N(this, "_scrollingActive", !1),
      N(this, "_scrollSpeed", { x: 0, y: 0 }),
      N(this, "_scrollDelta", { x: 0, y: 0 }),
      N(this, "disable", this._bindStartEvents.bind(this, !1)),
      N(this, "enable", this._bindStartEvents),
      (this._options = {
        selectionAreaClass: "selection-area",
        selectionContainerClass: void 0,
        selectables: [],
        document: window.document,
        startAreas: ["html"],
        boundaries: ["html"],
        container: "body",
        ...e,
        behaviour: {
          overlap: "invert",
          intersect: "touch",
          triggers: [0],
          ...e.behaviour,
          startThreshold:
            null != (t = e.behaviour) && t.startThreshold
              ? "number" === typeof e.behaviour.startThreshold
                ? e.behaviour.startThreshold
                : { x: 10, y: 10, ...e.behaviour.startThreshold }
              : { x: 10, y: 10 },
          scrolling: {
            speedDivider: 10,
            manualSpeed: 750,
            ...(null == (n = e.behaviour) ? void 0 : n.scrolling),
            startScrollMargins: {
              x: 0,
              y: 0,
              ...(null == (o = null == (i = e.behaviour) ? void 0 : i.scrolling)
                ? void 0
                : o.startScrollMargins),
            },
          },
        },
        features: {
          range: !0,
          touch: !0,
          ...e.features,
          singleTap: {
            allow: !0,
            intersect: "native",
            ...(null == (r = e.features) ? void 0 : r.singleTap),
          },
        },
      });
    for (const e of Object.getOwnPropertyNames(Object.getPrototypeOf(this))) {
      "function" === typeof this[e] && (this[e] = this[e].bind(this));
    }
    const {
      document: s,
      selectionAreaClass: a,
      selectionContainerClass: l,
    } = this._options;
    (this._area = s.createElement("div")),
      (this._clippingElement = s.createElement("div")),
      this._clippingElement.appendChild(this._area),
      this._area.classList.add(a),
      l && this._clippingElement.classList.add(l),
      O(this._area, {
        willChange: "top, left, bottom, right, width, height",
        top: 0,
        left: 0,
        position: "fixed",
      }),
      O(this._clippingElement, {
        overflow: "hidden",
        position: "fixed",
        transform: "translate3d(0, 0, 0)",
        pointerEvents: "none",
        zIndex: "1",
      }),
      (this._frame = Ot((e) => {
        this._recalculateSelectionAreaRect(),
          this._updateElementSelection(),
          this._emitEvent("move", e),
          this._redrawSelectionArea();
      })),
      this.enable();
  }
  _bindStartEvents(e = !0) {
    const { document: t, features: n } = this._options,
      i = e ? V : H;
    i(t, "mousedown", this._onTapStart),
      n.touch && i(t, "touchstart", this._onTapStart, { passive: !1 });
  }
  _onTapStart(e, t = !1) {
    const { x: n, y: i, target: o } = te(e),
      { _options: r } = this,
      { document: s } = this._options,
      a = o.getBoundingClientRect();
    if (e instanceof MouseEvent && !Ht(e, r.behaviour.triggers)) {
      return;
    }
    const l = W(r.startAreas, r.document),
      c = W(r.boundaries, r.document);
    this._targetElement = c.find((e) => Te(e.getBoundingClientRect(), a));
    const d = e.composedPath();
    if (
      !this._targetElement ||
      !l.find((e) => d.includes(e)) ||
      !c.find((e) => d.includes(e)) ||
      (!t && !1 === this._emitEvent("beforestart", e))
    ) {
      return;
    }
    this._areaLocation = { x1: n, y1: i, x2: 0, y2: 0 };
    const h = s.scrollingElement ?? s.body;
    (this._scrollDelta = { x: h.scrollLeft, y: h.scrollTop }),
      (this._singleClick = !0),
      this.clearSelection(!1, !0),
      V(s, ["touchmove", "mousemove"], this._delayedTapMove, { passive: !1 }),
      V(s, ["mouseup", "touchcancel", "touchend"], this._onTapStop),
      V(s, "scroll", this._onScroll);
  }
  _onSingleTap(e) {
    const {
        singleTap: { intersect: t },
        range: n,
      } = this._options.features,
      i = te(e);
    let o;
    if ("native" === t) {
      o = i.target;
    } else if ("touch" === t) {
      this.resolveSelectables();
      const { x: e, y: t } = i;
      o = this._selectables.find((n) => {
        const {
          right: i,
          left: o,
          top: r,
          bottom: s,
        } = n.getBoundingClientRect();
        return e < i && e > o && t < s && t > r;
      });
    }
    if (!o) {
      return;
    }
    for (this.resolveSelectables(); !this._selectables.includes(o); ) {
      if (!o.parentElement) {
        return;
      }
      o = o.parentElement;
    }
    const { stored: r } = this._selection;
    if ((this._emitEvent("start", e), e.shiftKey && n && this._latestElement)) {
      const e = this._latestElement,
        [t, n] = 4 & e.compareDocumentPosition(o) ? [o, e] : [e, o],
        i = [
          ...this._selectables.filter(
            (e) =>
              4 & e.compareDocumentPosition(t) &&
              2 & e.compareDocumentPosition(n)
          ),
          t,
          n,
        ];
      this.select(i), (this._latestElement = e);
    } else {
      r.includes(o) &&
      (1 === r.length ||
        e.ctrlKey ||
        r.every((e) => this._selection.stored.includes(e)))
        ? this.deselect(o)
        : (this.select(o), (this._latestElement = o));
    }
  }
  _delayedTapMove(e) {
    const {
        container: t,
        document: n,
        behaviour: { startThreshold: i },
      } = this._options,
      { x1: o, y1: r } = this._areaLocation,
      { x: s, y: a } = te(e);
    if (
      ("number" === typeof i && F(s + a - (o + r)) >= i) ||
      ("object" === typeof i && F(s - o) >= i.x) ||
      F(a - r) >= i.y
    ) {
      if (
        (H(n, ["mousemove", "touchmove"], this._delayedTapMove, {
          passive: !1,
        }),
        !1 === this._emitEvent("beforedrag", e))
      ) {
        return void H(
          n,
          ["mouseup", "touchcancel", "touchend"],
          this._onTapStop
        );
      }
      V(n, ["mousemove", "touchmove"], this._onTapMove, { passive: !1 }),
        O(this._area, "display", "block"),
        W(t, n)[0].appendChild(this._clippingElement),
        this.resolveSelectables(),
        (this._singleClick = !1),
        (this._targetRect = this._targetElement.getBoundingClientRect()),
        (this._scrollAvailable =
          this._targetElement.scrollHeight !==
            this._targetElement.clientHeight ||
          this._targetElement.scrollWidth !== this._targetElement.clientWidth),
        this._scrollAvailable &&
          (V(this._targetElement, "wheel", this._manualScroll, { passive: !1 }),
          (this._selectables = this._selectables.filter((e) =>
            this._targetElement.contains(e)
          ))),
        this._setupSelectionArea(),
        this._emitEvent("start", e),
        this._onTapMove(e);
    }
    this._handleMoveEvent(e);
  }
  _setupSelectionArea() {
    const { _clippingElement: e, _targetElement: t, _area: n } = this,
      i = (this._targetRect = t.getBoundingClientRect());
    this._scrollAvailable
      ? (O(e, { top: i.top, left: i.left, width: i.width, height: i.height }),
        O(n, { marginTop: -i.top, marginLeft: -i.left }))
      : (O(e, { top: 0, left: 0, width: "100%", height: "100%" }),
        O(n, { marginTop: 0, marginLeft: 0 }));
  }
  _onTapMove(e) {
    const { x: t, y: n } = te(e),
      { _scrollSpeed: i, _areaLocation: o, _options: r, _frame: s } = this,
      { speedDivider: a } = r.behaviour.scrolling,
      l = this._targetElement;
    if (
      ((o.x2 = t),
      (o.y2 = n),
      this._scrollAvailable && !this._scrollingActive && (i.y || i.x))
    ) {
      this._scrollingActive = !0;
      const t = () => {
        if (!i.x && !i.y) {
          return void (this._scrollingActive = !1);
        }
        const { scrollTop: n, scrollLeft: r } = l;
        i.y && ((l.scrollTop += je(i.y / a)), (o.y1 -= l.scrollTop - n)),
          i.x && ((l.scrollLeft += je(i.x / a)), (o.x1 -= l.scrollLeft - r)),
          s.next(e),
          requestAnimationFrame(t);
      };
      requestAnimationFrame(t);
    } else {
      s.next(e);
    }
    this._handleMoveEvent(e);
  }
  _handleMoveEvent(e) {
    const { features: t } = this._options;
    ((t.touch && jt()) || (this._scrollAvailable && Dt())) &&
      e.preventDefault();
  }
  _onScroll() {
    const {
        _scrollDelta: e,
        _options: { document: t },
      } = this,
      { scrollTop: n, scrollLeft: i } = t.scrollingElement ?? t.body;
    (this._areaLocation.x1 += e.x - i),
      (this._areaLocation.y1 += e.y - n),
      (e.x = i),
      (e.y = n),
      this._setupSelectionArea(),
      this._frame.next(null);
  }
  _manualScroll(e) {
    const { manualSpeed: t } = this._options.behaviour.scrolling,
      n = e.deltaY ? (e.deltaY > 0 ? 1 : -1) : 0,
      i = e.deltaX ? (e.deltaX > 0 ? 1 : -1) : 0;
    (this._scrollSpeed.y += n * t),
      (this._scrollSpeed.x += i * t),
      this._onTapMove(e),
      e.preventDefault();
  }
  _recalculateSelectionAreaRect() {
    const {
        _scrollSpeed: e,
        _areaLocation: t,
        _areaRect: n,
        _targetElement: i,
        _options: o,
      } = this,
      {
        scrollTop: r,
        scrollHeight: s,
        clientHeight: a,
        scrollLeft: l,
        scrollWidth: c,
        clientWidth: d,
      } = i,
      h = this._targetRect,
      { x1: p, y1: m } = t;
    let { x2: u, y2: f } = t;
    const {
      behaviour: {
        scrolling: { startScrollMargins: g },
      },
    } = o;
    u < h.left + g.x
      ? ((e.x = l ? -F(h.left - u + g.x) : 0), (u = u < h.left ? h.left : u))
      : u > h.right - g.x
      ? ((e.x = c - l - d ? F(h.left + h.width - u - g.x) : 0),
        (u = u > h.right ? h.right : u))
      : (e.x = 0),
      f < h.top + g.y
        ? ((e.y = r ? -F(h.top - f + g.y) : 0), (f = f < h.top ? h.top : f))
        : f > h.bottom - g.y
        ? ((e.y = s - r - a ? F(h.top + h.height - f - g.y) : 0),
          (f = f > h.bottom ? h.bottom : f))
        : (e.y = 0);
    const v = $e(p, u),
      b = $e(m, f),
      y = Ae(p, u),
      x = Ae(m, f);
    (n.x = v), (n.y = b), (n.width = y - v), (n.height = x - b);
  }
  _redrawSelectionArea() {
    const { x: e, y: t, width: n, height: i } = this._areaRect,
      { style: o } = this._area;
    (o.left = `${e}px`),
      (o.top = `${t}px`),
      (o.width = `${n}px`),
      (o.height = `${i}px`);
  }
  _onTapStop(e, t) {
    var n;
    const { document: i, features: o } = this._options,
      { _singleClick: r } = this;
    H(i, ["mousemove", "touchmove"], this._delayedTapMove),
      H(i, ["touchmove", "mousemove"], this._onTapMove),
      H(i, ["mouseup", "touchcancel", "touchend"], this._onTapStop),
      H(i, "scroll", this._onScroll),
      this._keepSelection(),
      e && r && o.singleTap.allow
        ? this._onSingleTap(e)
        : !r &&
          !t &&
          (this._updateElementSelection(), this._emitEvent("stop", e)),
      (this._scrollSpeed.x = 0),
      (this._scrollSpeed.y = 0),
      H(this._targetElement, "wheel", this._manualScroll, { passive: !0 }),
      this._clippingElement.remove(),
      null == (n = this._frame) || n.cancel(),
      O(this._area, "display", "none");
  }
  _updateElementSelection() {
    const { _selectables: e, _options: t, _selection: n, _areaRect: i } = this,
      { stored: o, selected: r, touched: s } = n,
      { intersect: a, overlap: l } = t.behaviour,
      c = "invert" === l,
      d = [],
      h = [],
      p = [];
    for (let t = 0; t < e.length; t++) {
      const n = e[t];
      if (Te(i, n.getBoundingClientRect(), a)) {
        if (r.includes(n)) {
          o.includes(n) && !s.includes(n) && s.push(n);
        } else {
          if (c && o.includes(n)) {
            p.push(n);
            continue;
          }
          h.push(n);
        }
        d.push(n);
      }
    }
    c && h.push(...o.filter((e) => !r.includes(e)));
    const m = "keep" === l;
    for (let e = 0; e < r.length; e++) {
      const t = r[e];
      !d.includes(t) && (!m || !o.includes(t)) && p.push(t);
    }
    (n.selected = d),
      (n.changed = { added: h, removed: p }),
      (this._latestElement = void 0);
  }
  _emitEvent(e, t) {
    return this.emit(e, { event: t, store: this._selection, selection: this });
  }
  _keepSelection() {
    const { _options: e, _selection: t } = this,
      { selected: n, changed: i, touched: o, stored: r } = t,
      s = n.filter((e) => !r.includes(e));
    switch (e.behaviour.overlap) {
      case "drop":
        t.stored = [...s, ...r.filter((e) => !o.includes(e))];
        break;
      case "invert":
        t.stored = [...s, ...r.filter((e) => !i.removed.includes(e))];
        break;
      case "keep":
        t.stored = [...r, ...n.filter((e) => !r.includes(e))];
    }
  }
  trigger(e, t = !0) {
    this._onTapStart(e, t);
  }
  resolveSelectables() {
    this._selectables = W(this._options.selectables, this._options.document);
  }
  clearSelection(e = !0, t = !1) {
    const { selected: n, stored: i, changed: o } = this._selection;
    (o.added = []),
      o.removed.push(...n, ...(e ? i : [])),
      t || (this._emitEvent("move", null), this._emitEvent("stop", null)),
      (this._selection = {
        stored: e ? [] : i,
        selected: [],
        touched: [],
        changed: { added: [], removed: [] },
      });
  }
  getSelection() {
    return this._selection.stored;
  }
  getSelectionArea() {
    return this._area;
  }
  cancel(e = !1) {
    this._onTapStop(null, !e);
  }
  destroy() {
    this.cancel(),
      this.disable(),
      this._clippingElement.remove(),
      super.unbindAllListeners();
  }
  select(e, t = !1) {
    const { changed: n, selected: i, stored: o } = this._selection,
      r = W(e, this._options.document).filter(
        (e) => !i.includes(e) && !o.includes(e)
      );
    return (
      o.push(...r),
      i.push(...r),
      n.added.push(...r),
      (n.removed = []),
      (this._latestElement = void 0),
      t || (this._emitEvent("move", null), this._emitEvent("stop", null)),
      r
    );
  }
  deselect(e, t = !1) {
    const { selected: n, stored: i, changed: o } = this._selection,
      r = W(e, this._options.document).filter(
        (e) => n.includes(e) || i.includes(e)
      );
    r.length &&
      ((this._selection.stored = i.filter((e) => !r.includes(e))),
      (this._selection.selected = n.filter((e) => !r.includes(e))),
      (this._selection.changed.added = []),
      this._selection.changed.removed.push(
        ...r.filter((e) => !o.removed.includes(e))
      ),
      (this._latestElement = void 0),
      t || (this._emitEvent("move", null), this._emitEvent("stop", null)));
  }
}
function Pt(e) {
  const t = 2 === e.mouseSelectionButton ? [2] : [0],
    n = new Ie({
      selectables: [".map-container me-tpc"],
      boundaries: [e.container],
      container: e.selectionContainer,
      behaviour: {
        triggers: t,
        scrolling: {
          speedDivider: 10,
          manualSpeed: 750,
          startScrollMargins: { x: 10, y: 10 },
        },
      },
    })
      .on("beforestart", ({ event: e }) => {
        if (
          "ME-TPC" === e.target.tagName ||
          "input-box" === e.target.id ||
          "circle" === e.target.className
        ) {
          return !1;
        }
        const t = n.getSelectionArea();
        return (
          (t.style.background = "#4f90f22d"),
          (t.style.border = "1px solid #4f90f2"),
          t.parentElement && (t.parentElement.style.zIndex = "9999"),
          !0
        );
      })
      .on("start", ({ event: t }) => {
        !t.ctrlKey &&
          !t.metaKey &&
          (e.clearSelection(), n.clearSelection(!0, !0));
      })
      .on(
        "move",
        ({
          store: {
            changed: { added: e, removed: t },
          },
        }) => {
          k.moved = !0;
          for (const t of e) {
            t.classList.add("selected");
          }
          for (const e of t) {
            e.classList.remove("selected");
          }
        }
      )
      .on("stop", ({ store: { stored: t } }) => {
        e.selectNodes(t);
      });
  e.selection = n;
}
N(Ie, "version", "3.5.1");
const Bt = function (e, t = !0) {
    this.theme = e;
    const n = this.theme.cssVar,
      i = Object.keys(n);
    this.container.style.cssText = "";
    for (let e = 0; e < i.length; e++) {
      const t = i[e];
      this.container.style.setProperty(t, n[t]);
    }
    e.cssVar["--gap"] || this.container.style.setProperty("--gap", "30px"),
      t && this.refresh();
  },
  Y = (e) => {
    var t;
    const n = null == (t = e.parent) ? void 0 : t.children,
      i = (null == n ? void 0 : n.indexOf(e)) ?? 0;
    return { siblings: n, index: i };
  };
function Rt(e) {
  const { siblings: t, index: n } = Y(e);
  if (void 0 === t) {
    return;
  }
  const i = t[n];
  0 === n
    ? ((t[n] = t[t.length - 1]), (t[t.length - 1] = i))
    : ((t[n] = t[n - 1]), (t[n - 1] = i));
}
function zt(e) {
  const { siblings: t, index: n } = Y(e);
  if (void 0 === t) {
    return;
  }
  const i = t[n];
  n === t.length - 1
    ? ((t[n] = t[0]), (t[0] = i))
    : ((t[n] = t[n + 1]), (t[n + 1] = i));
}
function be(e) {
  const { siblings: t, index: n } = Y(e);
  return void 0 === t ? 0 : (t.splice(n, 1), t.length);
}
function Ft(e, t, n) {
  const { siblings: i, index: o } = Y(n);
  void 0 !== i && ("before" === t ? i.splice(o, 0, e) : i.splice(o + 1, 0, e));
}
function qt(e, t) {
  const { siblings: n, index: i } = Y(e);
  void 0 !== n && ((n[i] = t), (t.children = [e]));
}
function Ke(e, t, n) {
  var i;
  if (
    (be(t),
    (null != (i = n.parent) && i.parent) || (t.direction = n.direction),
    "in" === e)
  ) {
    n.children ? n.children.push(t) : (n.children = [t]);
  } else {
    void 0 !== t.direction && (t.direction = n.direction);
    const { siblings: i, index: o } = Y(n);
    if (void 0 === i) {
      return;
    }
    "before" === e ? i.splice(o, 0, t) : i.splice(o + 1, 0, t);
  }
}
const Vt = function ({ map: e, direction: t }, n) {
    var i, o;
    if (0 === t) {
      return 0;
    }
    if (1 === t) {
      return 1;
    }
    if (2 === t) {
      return ((null == (i = e.querySelector(".lhs"))
        ? void 0
        : i.childElementCount) || 0) <=
        ((null == (o = e.querySelector(".rhs"))
          ? void 0
          : o.childElementCount) || 0)
        ? ((n.direction = 0), 0)
        : ((n.direction = 1), 1);
    }
  },
  Ue = function (e, t, n) {
    var i, o;
    const r = n.children[0].children[0],
      s = t.parentElement;
    if ("ME-PARENT" === s.tagName) {
      if ((Q(r), s.children[1])) {
        s.nextSibling.appendChild(n);
      } else {
        const t = e.createChildren([n]);
        s.appendChild(ve(!0)), s.insertAdjacentElement("afterend", t);
      }
      e.linkDiv(n.offsetParent);
    } else {
      "ME-ROOT" === s.tagName &&
        (0 === Vt(e, r.nodeObj)
          ? null == (i = e.container.querySelector(".lhs")) || i.appendChild(n)
          : null == (o = e.container.querySelector(".rhs")) || o.appendChild(n),
        e.linkDiv());
    }
  },
  Ye = function (e, t) {
    const n = e.parentNode;
    if (0 === t) {
      const e = n.parentNode.parentNode;
      "ME-MAIN" !== e.tagName &&
        (e.previousSibling.children[1].remove(), e.remove());
    }
    n.parentNode.remove();
  },
  Xe = { before: "beforebegin", after: "afterend" },
  Q = function (e) {
    const t = e.parentElement.parentElement.lastElementChild;
    "svg" === (null == t ? void 0 : t.tagName) && (null == t || t.remove());
  },
  Wt = function (e, t) {
    const n = e.nodeObj,
      i = me(n);
    i.style && t.style && (t.style = Object.assign(i.style, t.style));
    const o = Object.assign(n, t);
    ge(e, o),
      this.linkDiv(),
      this.bus.fire("operation", { name: "reshapeNode", obj: o, origin: i });
  },
  ye = function (e, t, n) {
    if (!t) {
      return null;
    }
    const i = t.nodeObj;
    !1 === i.expanded && (e.expandNode(t, !0), (t = S(i.id)));
    const o = n || e.generateNewObj();
    i.children ? i.children.push(o) : (i.children = [o]), B(e.nodeData);
    const { grp: r, top: s } = e.createWrapper(o);
    return Ue(e, t, r), { newTop: s, newNodeObj: o };
  },
  It = function (e, t, n) {
    var i, o, r, s;
    const a = t || this.currentNode;
    if (!a) {
      return;
    }
    const l = a.nodeObj;
    if (!l.parent) {
      return void this.addChild();
    }
    if (
      (null == (i = l.parent) || !i.parent) &&
      1 ===
        (null == (r = null == (o = l.parent) ? void 0 : o.children)
          ? void 0
          : r.length)
    ) {
      return void this.addChild(S(l.parent.id), n);
    }
    const c = n || this.generateNewObj();
    if (null == (s = l.parent) || !s.parent) {
      const e = a.closest("me-main").className === L.LHS ? 0 : 1;
      c.direction = e;
    }
    Ft(c, e, l), B(this.nodeData);
    const d = a.parentElement,
      { grp: h, top: p } = this.createWrapper(c);
    d.parentElement.insertAdjacentElement(Xe[e], h),
      this.linkDiv(h.offsetParent),
      n || this.editTopic(p.firstChild),
      this.selectNode(p.firstChild, !0),
      this.bus.fire("operation", { name: "insertSibling", type: e, obj: c });
  },
  Kt = function (e, t) {
    const n = e || this.currentNode;
    if (!n) {
      return;
    }
    Q(n);
    const i = n.nodeObj;
    if (!i.parent) {
      return;
    }
    const o = t || this.generateNewObj();
    qt(i, o), B(this.nodeData);
    const r = n.parentElement.parentElement,
      { grp: s, top: a } = this.createWrapper(o, !0);
    a.appendChild(ve(!0)), r.insertAdjacentElement("afterend", s);
    const l = this.createChildren([r]);
    a.insertAdjacentElement("afterend", l),
      this.linkDiv(),
      t || this.editTopic(a.firstChild),
      this.selectNode(a.firstChild, !0),
      this.bus.fire("operation", { name: "insertParent", obj: o });
  },
  Ut = function (e, t) {
    const n = e || this.currentNode;
    if (!n) {
      return;
    }
    const i = ye(this, n, t);
    if (!i) {
      return;
    }
    const { newTop: o, newNodeObj: r } = i;
    this.bus.fire("operation", { name: "addChild", obj: r }),
      t || this.editTopic(o.firstChild),
      this.selectNode(o.firstChild, !0);
  },
  Yt = function (e, t) {
    const n = me(e.nodeObj);
    pe(n);
    const i = ye(this, t, n);
    if (!i) {
      return;
    }
    const { newNodeObj: o } = i;
    this.selectNode(S(o.id)),
      this.bus.fire("operation", { name: "copyNode", obj: o });
  },
  Xt = function (e, t) {
    e = de(e);
    const n = [];
    for (let i = 0; i < e.length; i++) {
      const o = me(e[i].nodeObj);
      pe(o);
      const r = ye(this, t, o);
      if (!r) {
        return;
      }
      const { newNodeObj: s } = r;
      n.push(s);
    }
    this.selectNodes(n.map((e) => S(e.id))),
      this.bus.fire("operation", { name: "copyNodes", objs: n });
  },
  Gt = function (e) {
    const t = e || this.currentNode;
    if (!t) {
      return;
    }
    const n = t.nodeObj;
    Rt(n);
    const i = t.parentNode.parentNode;
    i.parentNode.insertBefore(i, i.previousSibling),
      this.linkDiv(),
      this.bus.fire("operation", { name: "moveUpNode", obj: n });
  },
  Jt = function (e) {
    const t = e || this.currentNode;
    if (!t) {
      return;
    }
    const n = t.nodeObj;
    zt(n);
    const i = t.parentNode.parentNode;
    i.nextSibling
      ? i.nextSibling.insertAdjacentElement("afterend", i)
      : i.parentNode.prepend(i),
      this.linkDiv(),
      this.bus.fire("operation", { name: "moveDownNode", obj: n });
  },
  Zt = function (e) {
    var t;
    const n = e || this.currentNode;
    if (!n) {
      return;
    }
    const i = n.nodeObj;
    if (!i.parent) {
      throw new Error("Can not remove root node");
    }
    const o = i.parent.children,
      r = o.findIndex((e) => e === i),
      s = be(i);
    if ((Ye(n, s), 0 !== o.length)) {
      const e = o[r] || o[r - 1];
      this.selectNode(S(e.id));
    } else {
      this.selectNode(S(i.parent.id));
    }
    this.linkDiv(),
      this.bus.fire("operation", {
        name: "removeNode",
        obj: i,
        originIndex: r,
        originParentId:
          null == (t = null == i ? void 0 : i.parent) ? void 0 : t.id,
      });
  },
  Qt = function (e) {
    e = de(e);
    for (const t of e) {
      const e = t.nodeObj;
      if (!e.parent) {
        continue;
      }
      const n = be(e);
      Ye(t, n);
    }
    this.linkDiv(),
      this.bus.fire("operation", {
        name: "removeNodes",
        objs: e.map((e) => e.nodeObj),
      });
  },
  en = function (e, t) {
    e = de(e);
    const n = t.nodeObj;
    !1 === n.expanded && (this.expandNode(t, !0), (t = S(n.id)));
    for (const i of e) {
      Ke("in", i.nodeObj, n), B(this.nodeData);
      const e = i.parentElement;
      Ue(this, t, e.parentElement);
    }
    this.linkDiv(),
      this.bus.fire("operation", {
        name: "moveNodeIn",
        objs: e.map((e) => e.nodeObj),
        toObj: n,
      });
  },
  Ge = (e, t, n, i) => {
    (e = de(e)), "after" === t && (e = e.reverse());
    const o = n.nodeObj,
      r = [];
    for (const s of e) {
      Ke(t, s.nodeObj, o), B(i.nodeData), Q(s);
      const e = s.parentElement.parentNode;
      r.includes(e.parentElement) || r.push(e.parentElement),
        n.parentElement.parentNode.insertAdjacentElement(Xe[t], e);
    }
    for (const e of r) {
      0 === e.childElementCount &&
        "ME-MAIN" !== e.tagName &&
        (e.previousSibling.children[1].remove(), e.remove());
    }
    i.linkDiv(),
      i.bus.fire("operation", {
        name: "before" === t ? "moveNodeBefore" : "moveNodeAfter",
        objs: e.map((e) => e.nodeObj),
        toObj: o,
      });
  },
  tn = function (e, t) {
    Ge(e, "before", t, this);
  },
  nn = function (e, t) {
    Ge(e, "after", t, this);
  },
  on = function (e) {
    const t = e || this.currentNode;
    t && (t.nodeObj.dangerouslySetInnerHTML || this.editTopic(t));
  },
  sn = function (e, t) {
    (e.text.textContent = t), (e.nodeObj.topic = t), this.linkDiv();
  },
  Je = Object.freeze(
    Object.defineProperty(
      {
        __proto__: null,
        addChild: Ut,
        beginEdit: on,
        copyNode: Yt,
        copyNodes: Xt,
        insertParent: Kt,
        insertSibling: It,
        moveDownNode: Jt,
        moveNodeAfter: nn,
        moveNodeBefore: tn,
        moveNodeIn: en,
        moveUpNode: Gt,
        removeNode: Zt,
        removeNodes: Qt,
        reshapeNode: Wt,
        rmSubline: Q,
        setNodeTopic: sn,
      },
      Symbol.toStringTag,
      { value: "Module" }
    )
  );
function Ze(e) {
  return {
    nodeData: e.isFocusMode ? e.nodeDataBackup : e.nodeData,
    arrows: e.arrows,
    summaries: e.summaries,
    direction: e.direction,
    theme: e.theme,
  };
}
const rn = function (e, t, n) {
    if (e) {
      if ((this.clearSelection(), "string" === typeof e)) {
        const t = S(e);
        return t ? this.selectNode(t) : void 0;
      }
      (e.className = "selected"),
        e.scrollIntoView({ block: "nearest", inline: "nearest" }),
        (this.currentNode = e),
        t
          ? this.bus.fire("selectNewNode", e.nodeObj)
          : this.bus.fire("selectNode", e.nodeObj, n);
    }
  },
  cn = function () {
    this.currentNode && (this.currentNode.className = ""),
      (this.currentNode = null),
      this.bus.fire("unselectNode");
  },
  ln = function (e) {
    this.clearSelection();
    for (const t of e) {
      t.className = "selected";
    }
    (this.currentNodes = e),
      this.bus.fire(
        "selectNodes",
        e.map((e) => e.nodeObj)
      );
  },
  an = function () {
    if (this.currentNodes) {
      for (const e of this.currentNodes) {
        e.classList.remove("selected");
      }
    }
    (this.currentNodes = null), this.bus.fire("unselectNodes");
  },
  dn = function () {
    this.unselectNode(),
      this.unselectNodes(),
      this.unselectSummary(),
      this.unselectArrow();
  },
  hn = function () {
    const e = Ze(this);
    return JSON.stringify(e, (e, t) => {
      if ("parent" !== e || "string" === typeof t) {
        return t;
      }
    });
  },
  un = function () {
    return JSON.parse(this.getDataString());
  },
  fn = function () {
    const e = Ze(this).nodeData;
    let t = "# " + e.topic + "\n\n";
    return (
      (function e(n, i) {
        for (let o = 0; o < n.length; o++) {
          (t +=
            i <= 6
              ? "".padStart(i, "#") + " " + n[o].topic + "\n\n"
              : "".padStart(i - 7, "\t") + "- " + n[o].topic + "\n"),
            n[o].children && e(n[o].children || [], i + 1);
        }
      })(e.children || [], 2),
      t
    );
  },
  pn = function () {
    this.editable = !0;
  },
  mn = function () {
    this.editable = !1;
  },
  gn = function (e) {
    (this.scaleVal = e),
      (this.map.style.transform = "scale(" + e + ")"),
      this.bus.fire("scale", e);
  },
  vn = function () {
    const e = this.nodes.offsetHeight / this.container.offsetHeight,
      t = this.nodes.offsetWidth / this.container.offsetWidth,
      n = 1 / Math.max(1, Math.max(e, t));
    (this.scaleVal = n),
      (this.map.style.transform = "scale(" + n + ")"),
      this.bus.fire("scale", n);
  },
  bn = function () {
    this.container.scrollTo(
      1e4 - this.container.offsetWidth / 2,
      1e4 - this.container.offsetHeight / 2
    );
  },
  yn = function (e) {
    e(this);
  },
  xn = function (e) {
    e.nodeObj.parent &&
      (null === this.tempDirection && (this.tempDirection = this.direction),
      this.isFocusMode ||
        ((this.nodeDataBackup = this.nodeData), (this.isFocusMode = !0)),
      (this.nodeData = e.nodeObj),
      this.initRight(),
      this.toCenter());
  },
  wn = function () {
    (this.isFocusMode = !1),
      null !== this.tempDirection &&
        ((this.nodeData = this.nodeDataBackup),
        (this.direction = this.tempDirection),
        (this.tempDirection = null),
        this.refresh(),
        this.toCenter());
  },
  En = function () {
    (this.direction = 0), this.refresh();
  },
  Nn = function () {
    (this.direction = 1), this.refresh();
  },
  Cn = function () {
    (this.direction = 2), this.refresh();
  },
  Sn = function (e) {
    (this.locale = e), this.refresh();
  },
  _n = function (e, t) {
    const n = e.nodeObj;
    "boolean" === typeof t
      ? (n.expanded = t)
      : !1 !== n.expanded
      ? (n.expanded = !1)
      : (n.expanded = !0);
    const i = e.parentNode,
      o = i.children[1];
    if (
      ((o.expanded = n.expanded),
      (o.className = n.expanded ? "minus" : ""),
      Q(e),
      n.expanded)
    ) {
      const e = this.createChildren(
        n.children.map((e) => this.createWrapper(e).grp)
      );
      i.parentNode.appendChild(e);
    } else {
      i.parentNode.children[1].remove();
    }
    this.linkDiv(e.closest("me-main > me-wrapper"));
    const r = e.getBoundingClientRect(),
      s = this.container.getBoundingClientRect();
    (r.bottom > s.bottom ||
      r.top < s.top ||
      r.right > s.right ||
      r.left < s.left) &&
      e.scrollIntoView({ block: "center", inline: "center" }),
      this.bus.fire("expandNode", n);
  },
  Ln = function (e) {
    e &&
      ((e = JSON.parse(JSON.stringify(e))),
      (this.nodeData = e.nodeData),
      (this.arrows = e.arrows || []),
      (this.summaries = e.summaries || [])),
      B(this.nodeData),
      this.layout(),
      this.linkDiv();
  },
  Mn = Object.freeze(
    Object.defineProperty(
      {
        __proto__: null,
        cancelFocus: wn,
        clearSelection: dn,
        disableEdit: mn,
        enableEdit: pn,
        expandNode: _n,
        focusNode: xn,
        getData: un,
        getDataMd: fn,
        getDataString: hn,
        initLeft: En,
        initRight: Nn,
        initSide: Cn,
        install: yn,
        refresh: Ln,
        scale: gn,
        scaleFit: vn,
        selectNode: rn,
        selectNodes: ln,
        setLocale: Sn,
        toCenter: bn,
        unselectNode: cn,
        unselectNodes: an,
      },
      Symbol.toStringTag,
      { value: "Module" }
    )
  ),
  kn = function (e) {
    return {
      dom: e,
      moved: !1,
      mousedown: !1,
      handleMouseMove(e) {
        this.mousedown &&
          ((this.moved = !0), this.cb && this.cb(e.movementX, e.movementY));
      },
      handleMouseDown(e) {
        0 === e.button && (this.mousedown = !0);
      },
      handleClear(e) {
        this.mousedown = !1;
      },
      cb: null,
      init(e, t) {
        (this.cb = t),
          (this.handleClear = this.handleClear.bind(this)),
          (this.handleMouseMove = this.handleMouseMove.bind(this)),
          (this.handleMouseDown = this.handleMouseDown.bind(this)),
          e.addEventListener("mousemove", this.handleMouseMove),
          e.addEventListener("mouseleave", this.handleClear),
          e.addEventListener("mouseup", this.handleClear),
          this.dom.addEventListener("mousedown", this.handleMouseDown);
      },
      destory(e) {
        e.removeEventListener("mousemove", this.handleMouseMove),
          e.removeEventListener("mouseleave", this.handleClear),
          e.removeEventListener("mouseup", this.handleClear),
          this.dom.removeEventListener("mousedown", this.handleMouseDown);
      },
      clear() {
        (this.moved = !1), (this.mousedown = !1);
      },
    };
  },
  De = { create: kn };
function le(e, t, n) {
  const { offsetLeft: i, offsetTop: o } = R(e.nodes, t),
    r = t.offsetWidth,
    s = t.offsetHeight,
    a = i + r / 2,
    l = o + s / 2;
  return { w: r, h: s, cx: a, cy: l, ctrlX: a + n.x, ctrlY: l + n.y };
}
function I(e) {
  let t, n;
  const i = (e.cy - e.ctrlY) / (e.ctrlX - e.cx);
  return (
    i > e.h / e.w || i < -e.h / e.w
      ? e.cy - e.ctrlY < 0
        ? ((t = e.cx - e.h / 2 / i), (n = e.cy + e.h / 2))
        : ((t = e.cx + e.h / 2 / i), (n = e.cy - e.h / 2))
      : e.cx - e.ctrlX < 0
      ? ((t = e.cx + e.w / 2), (n = e.cy - (e.w * i) / 2))
      : ((t = e.cx - e.w / 2), (n = e.cy + (e.w * i) / 2)),
    { x: t, y: n }
  );
}
const Tn = function (e, t, n, i) {
    const o = document.createElementNS("http://www.w3.org/2000/svg", "text");
    return (
      C(o, {
        "text-anchor": "middle",
        x: t + "",
        y: n + "",
        fill: i || "#666",
      }),
      (o.dataset.type = "custom-link"),
      (o.innerHTML = e),
      o
    );
  },
  Qe = function (e, t, n, i, o) {
    if (!t || !n) {
      return;
    }
    performance.now();
    const r = le(e, t, i.delta1),
      s = le(e, n, i.delta2),
      { x: a, y: l } = I(r),
      { ctrlX: c, ctrlY: d } = r,
      { ctrlX: h, ctrlY: p } = s,
      { x: m, y: u } = I(s),
      f = re(h, p, m, u),
      g = `M ${f.x1} ${f.y1} L ${m} ${u} L ${f.x2} ${f.y2}`;
    let v = "";
    if (i.bidirectional) {
      const e = re(c, d, a, l);
      v = `M ${e.x1} ${e.y1} L ${a} ${l} L ${e.x2} ${e.y2}`;
    }
    const b = ft(`M ${a} ${l} C ${c} ${d} ${h} ${p} ${m} ${u}`, g, v),
      y = a / 8 + (3 * c) / 8 + (3 * h) / 8 + m / 8,
      x = l / 8 + (3 * d) / 8 + (3 * p) / 8 + u / 8,
      N = Tn(i.label, y, x, e.theme.cssVar["--color"]);
    b.appendChild(N),
      (b.arrowObj = i),
      (b.dataset.linkid = i.id),
      e.linkSvgGroup.appendChild(b),
      o || (e.arrows.push(i), (e.currentArrow = b), et(e, i, r, s)),
      performance.now();
  },
  An = function (e, t, n = {}) {
    const i = {
      id: U(),
      label: "Custom Link",
      from: e.nodeObj.id,
      to: t.nodeObj.id,
      delta1: { x: 0, y: -200 },
      delta2: { x: 0, y: -200 },
      ...n,
    };
    Qe(this, e, t, i),
      this.bus.fire("operation", { name: "createArrow", obj: i });
  },
  $n = function (e) {
    let t;
    if (((t = e || this.currentArrow), !t)) {
      return;
    }
    xe(this);
    const n = t.arrowObj.id;
    (this.arrows = this.arrows.filter((e) => e.id !== n)),
      t.remove(),
      this.bus.fire("operation", { name: "removeArrow", obj: { id: n } });
  },
  jn = function (e) {
    this.currentArrow = e;
    const t = e.arrowObj,
      n = S(t.from),
      i = S(t.to),
      o = le(this, n, t.delta1),
      r = le(this, i, t.delta2);
    et(this, t, o, r);
  },
  Dn = function () {
    (this.currentArrow = null), xe(this);
  },
  xe = function (e) {
    var t, n;
    null == (t = e.helper1) || t.destory(e.map),
      null == (n = e.helper2) || n.destory(e.map),
      (e.linkController.style.display = "none"),
      (e.P2.style.display = "none"),
      (e.P3.style.display = "none");
  },
  et = function (e, t, n, i) {
    (e.linkController.style.display = "initial"),
      (e.P2.style.display = "initial"),
      (e.P3.style.display = "initial"),
      e.nodes.appendChild(e.linkController),
      e.nodes.appendChild(e.P2),
      e.nodes.appendChild(e.P3);
    let { x: o, y: r } = I(n),
      { ctrlX: s, ctrlY: a } = n,
      { ctrlX: l, ctrlY: c } = i,
      { x: d, y: h } = I(i);
    (e.P2.style.cssText = `top:${a}px;left:${s}px;`),
      (e.P3.style.cssText = `top:${c}px;left:${l}px;`),
      C(e.line1, { x1: o + "", y1: r + "", x2: s + "", y2: a + "" }),
      C(e.line2, { x1: l + "", y1: c + "", x2: d + "", y2: h + "" }),
      (e.helper1 = De.create(e.P2)),
      (e.helper2 = De.create(e.P3)),
      e.helper1.init(e.map, (i, p) => {
        if (!e.currentArrow) {
          return;
        }
        (s += i / e.scaleVal), (a += p / e.scaleVal);
        const m = I({ ...n, ctrlX: s, ctrlY: a });
        (o = m.x), (r = m.y);
        const u = o / 8 + (3 * s) / 8 + (3 * l) / 8 + d / 8,
          f = r / 8 + (3 * a) / 8 + (3 * c) / 8 + h / 8;
        if (
          ((e.P2.style.top = a + "px"),
          (e.P2.style.left = s + "px"),
          e.currentArrow.children[0].setAttribute(
            "d",
            `M ${o} ${r} C ${s} ${a} ${l} ${c} ${d} ${h}`
          ),
          t.bidirectional)
        ) {
          const t = re(s, a, o, r);
          e.currentArrow.children[2].setAttribute(
            "d",
            `M ${t.x1} ${t.y1} L ${o} ${r} L ${t.x2} ${t.y2}`
          );
        }
        C(e.currentArrow.children[3], { x: u + "", y: f + "" }),
          C(e.line1, { x1: o + "", y1: r + "", x2: s + "", y2: a + "" }),
          (t.delta1.x = s - n.cx),
          (t.delta1.y = a - n.cy),
          e.bus.fire("updateArrowDelta", t);
      }),
      e.helper2.init(e.map, (n, p) => {
        if (!e.currentArrow) {
          return;
        }
        (l += n / e.scaleVal), (c += p / e.scaleVal);
        const m = I({ ...i, ctrlX: l, ctrlY: c });
        (d = m.x), (h = m.y);
        const u = o / 8 + (3 * s) / 8 + (3 * l) / 8 + d / 8,
          f = r / 8 + (3 * a) / 8 + (3 * c) / 8 + h / 8,
          g = re(l, c, d, h);
        (e.P3.style.top = c + "px"),
          (e.P3.style.left = l + "px"),
          e.currentArrow.children[0].setAttribute(
            "d",
            `M ${o} ${r} C ${s} ${a} ${l} ${c} ${d} ${h}`
          ),
          e.currentArrow.children[1].setAttribute(
            "d",
            `M ${g.x1} ${g.y1} L ${d} ${h} L ${g.x2} ${g.y2}`
          ),
          C(e.currentArrow.children[3], { x: u + "", y: f + "" }),
          C(e.line2, { x1: l + "", y1: c + "", x2: d + "", y2: h + "" }),
          (t.delta2.x = l - i.cx),
          (t.delta2.y = c - i.cy),
          e.bus.fire("updateArrowDelta", t);
      });
  };
function On() {
  this.linkSvgGroup.innerHTML = "";
  for (let e = 0; e < this.arrows.length; e++) {
    const t = this.arrows[e];
    try {
      Qe(this, S(t.from), S(t.to), t, !0);
    } catch {}
  }
  this.nodes.appendChild(this.linkSvgGroup);
}
function Hn(e) {
  if ((xe(this), !e)) {
    return;
  }
  const t = e.children[3];
  qe(this, t, (n) => {
    var i;
    const o = e.arrowObj,
      r = (null == (i = n.textContent) ? void 0 : i.trim()) || "";
    (o.label = "" === r ? origin : r),
      n.remove(),
      r !== origin &&
        ((t.innerHTML = o.label),
        this.linkDiv(),
        this.bus.fire("operation", { name: "finishEditArrowLabel", obj: o }));
  });
}
function Pn() {
  this.arrows = this.arrows.filter(
    (e) => se(e.from, this.nodeData) && se(e.to, this.nodeData)
  );
}
const Bn = Object.freeze(
    Object.defineProperty(
      {
        __proto__: null,
        createArrow: An,
        editArrowLabel: Hn,
        removeArrow: $n,
        renderArrow: On,
        selectArrow: jn,
        tidyArrow: Pn,
        unselectArrow: Dn,
      },
      Symbol.toStringTag,
      { value: "Module" }
    )
  ),
  Rn = function (e) {
    var t, n;
    if (0 === e.length) {
      throw new Error("No selected node.");
    }
    if (1 === e.length) {
      const t = e[0].nodeObj,
        n = e[0].nodeObj.parent;
      if (!n) {
        throw new Error("Can not select root node.");
      }
      const i = n.children.findIndex((e) => t === e);
      return { parent: n.id, start: i, end: i };
    }
    let i = 0;
    const o = e.map((e) => {
      let t = e.nodeObj;
      const n = [];
      for (; t.parent; ) {
        const e = t.parent,
          i = e.children,
          o = null == i ? void 0 : i.indexOf(t);
        (t = e), n.unshift({ node: t, index: o });
      }
      return n.length > i && (i = n.length), n;
    });
    let r = 0;
    e: for (; r < i; r++) {
      const e = null == (t = o[0][r]) ? void 0 : t.node;
      for (let t = 1; t < o.length; t++) {
        if ((null == (n = o[t][r]) ? void 0 : n.node) !== e) {
          break e;
        }
      }
    }
    if (!r) {
      throw new Error("Can not select root node.");
    }
    const s = o.map((e) => e[r - 1].index).sort(),
      a = s[0] || 0,
      l = s[s.length - 1] || 0,
      c = o[0][r - 1].node;
    if (!c.parent) {
      throw new Error("Please select nodes in the same main topic.");
    }
    return { parent: c.id, start: a, end: l };
  },
  zn = function (e) {
    const t = document.createElementNS("http://www.w3.org/2000/svg", "g");
    return t.setAttribute("id", e), t;
  },
  Oe = function (e, t) {
    const n = document.createElementNS("http://www.w3.org/2000/svg", "path");
    return (
      C(n, {
        d: e,
        stroke: t || "#666",
        fill: "none",
        "stroke-linecap": "round",
        "stroke-width": "2",
      }),
      n
    );
  },
  He = function (e, t, n, i, o) {
    const r = document.createElementNS("http://www.w3.org/2000/svg", "text");
    return (
      C(r, { "text-anchor": i, x: t + "", y: n + "", fill: o || "#666" }),
      (r.innerHTML = e),
      r
    );
  },
  Fn = (e) => S(e).parentElement.parentElement,
  qn = function ({ parent: e, start: t }) {
    const n = S(e),
      i = n.nodeObj;
    let o;
    return (
      (o = i.parent
        ? n.closest("me-main").className
        : S(i.children[t].id).closest("me-main").className),
      o
    );
  },
  we = function (e, t) {
    var n;
    const { id: i, text: o, parent: r, start: s, end: a } = t,
      l = e.nodes,
      c = S(r).nodeObj,
      d = qn(t);
    let h,
      p,
      m = 1 / 0,
      u = 0,
      f = 0,
      g = 0;
    for (let t = s; t <= a; t++) {
      const o = null == (n = c.children) ? void 0 : n[t];
      if (!o) {
        return e.removeSummary(i), null;
      }
      const r = Fn(o.id),
        { offsetLeft: d, offsetTop: h } = R(l, r),
        p = s === a ? 10 : 20;
      t === s && (f = h + p),
        t === a && (g = h + r.offsetHeight - p),
        d < m && (m = d),
        r.offsetWidth + d > u && (u = r.offsetWidth + d);
    }
    const v = f + 10,
      b = g + 10,
      y = (v + b) / 2,
      x = e.theme.cssVar["--color"];
    d === L.LHS
      ? ((h = Oe(
          `M ${m + 10} ${v} c -5 0 -10 5 -10 10 L ${m} ${
            b - 10
          } c 0 5 5 10 10 10 M ${m} ${y} h -10`,
          x
        )),
        (p = He(o, m - 20, y + 6, "end", x)))
      : ((h = Oe(
          `M ${u - 10} ${v} c 5 0 10 5 10 10 L ${u} ${
            b - 10
          } c 0 5 -5 10 -10 10 M ${u} ${y} h 10`,
          x
        )),
        (p = He(o, u + 20, y + 6, "start", x)));
    const N = zn("s-" + i);
    return (
      N.appendChild(h),
      N.appendChild(p),
      (N.summaryObj = t),
      e.summarySvg.appendChild(N),
      N
    );
  },
  Vn = function () {
    let e = [];
    this.currentNode
      ? (e = [this.currentNode])
      : this.currentNodes && (e = this.currentNodes);
    const { parent: t, start: n, end: i } = Rn(e),
      o = { id: U(), parent: t, start: n, end: i, text: "summary" },
      r = we(this, o);
    this.summaries.push(o),
      this.editSummary(r),
      this.bus.fire("operation", { name: "createSummary", obj: o });
  },
  Wn = function (e) {
    const t = { ...e, id: U() };
    we(this, t),
      this.summaries.push(t),
      this.bus.fire("operation", { name: "createSummary", obj: t });
  },
  In = function (e) {
    var t;
    const n = this.summaries.findIndex((t) => t.id === e);
    n > -1 &&
      (this.summaries.splice(n, 1),
      null == (t = document.querySelector("#s-" + e)) || t.remove()),
      this.bus.fire("operation", { name: "removeSummary", obj: { id: e } });
  },
  Kn = function (e) {
    const t = e.children[1].getBBox(),
      n = document.createElementNS("http://www.w3.org/2000/svg", "rect");
    C(n, {
      x: t.x - 6 + "",
      y: t.y - 6 + "",
      width: t.width + 12 + "",
      height: t.height + 12 + "",
      rx: "3",
      stroke: this.theme.cssVar["--selected"] || "#4dc4ff",
      "stroke-width": "2",
      fill: "none",
    }),
      e.appendChild(n),
      (this.currentSummary = e);
  },
  Un = function () {
    var e, t;
    null ==
      (t =
        null == (e = this.currentSummary) ? void 0 : e.querySelector("rect")) ||
      t.remove(),
      (this.currentSummary = null);
  },
  Yn = function () {
    (this.summarySvg.innerHTML = ""),
      this.summaries.forEach((e) => {
        try {
          we(this, e);
        } catch {}
      }),
      this.nodes.insertAdjacentElement("beforeend", this.summarySvg);
  },
  Xn = function (e) {
    if (!e) {
      return;
    }
    const t = e.childNodes[1];
    qe(this, t, (n) => {
      var i;
      const o = e.summaryObj,
        r = (null == (i = n.textContent) ? void 0 : i.trim()) || "";
      (o.text = "" === r ? origin : r),
        n.remove(),
        r !== origin &&
          ((t.innerHTML = o.text),
          this.linkDiv(),
          this.bus.fire("operation", { name: "finishEditSummary", obj: o }));
    });
  },
  Gn = Object.freeze(
    Object.defineProperty(
      {
        __proto__: null,
        createSummary: Vn,
        createSummaryFrom: Wn,
        editSummary: Xn,
        removeSummary: In,
        renderSummary: Yn,
        selectSummary: Kn,
        unselectSummary: Un,
      },
      Symbol.toStringTag,
      { value: "Module" }
    )
  ),
  A = "http://www.w3.org/2000/svg";
function Jn(e, t) {
  const n = document.createElementNS(A, "svg");
  return C(n, { version: "1.1", xmlns: A, height: e, width: t }), n;
}
function Zn(e, t) {
  return (parseInt(e) - parseInt(t)) / 2;
}
function Qn(e, t, n, i) {
  const o = document.createElementNS(A, "g");
  let r = "";
  return (
    (r = e.text ? e.text.textContent : e.childNodes[0].textContent),
    r.split("\n").forEach((e, r) => {
      const s = document.createElementNS(A, "text");
      C(s, {
        x: n + parseInt(t.paddingLeft) + "",
        y:
          i +
          parseInt(t.paddingTop) +
          Zn(t.lineHeight, t.fontSize) * (r + 1) +
          parseFloat(t.fontSize) * (r + 1) +
          "",
        "text-anchor": "start",
        "font-family": t.fontFamily,
        "font-size": `${t.fontSize}`,
        "font-weight": `${t.fontWeight}`,
        fill: `${t.color}`,
      }),
        (s.innerHTML = e),
        o.appendChild(s);
    }),
    o
  );
}
function eo(e, t, n, i) {
  var o;
  let r = "";
  r =
    null != (o = e.nodeObj) && o.dangerouslySetInnerHTML
      ? e.nodeObj.dangerouslySetInnerHTML
      : e.text
      ? e.text.textContent
      : e.childNodes[0].textContent;
  const s = document.createElementNS(A, "foreignObject");
  C(s, {
    x: n + parseInt(t.paddingLeft) + "",
    y: i + parseInt(t.paddingTop) + "",
    width: t.width,
    height: t.height,
  });
  const a = document.createElement("div");
  return (
    C(a, {
      xmlns: "http://www.w3.org/1999/xhtml",
      style: `font-family: ${t.fontFamily}; font-size: ${t.fontSize}; font-weight: ${t.fontWeight}; color: ${t.color}; white-space: pre-wrap;`,
    }),
    (a.innerHTML = r),
    s.appendChild(a),
    s
  );
}
function to(e, t) {
  const n = getComputedStyle(t),
    { offsetLeft: i, offsetTop: o } = R(e.nodes, t),
    r = document.createElementNS(A, "rect");
  return (
    C(r, {
      x: i + "",
      y: o + "",
      rx: n.borderRadius,
      ry: n.borderRadius,
      width: n.width,
      height: n.height,
      fill: n.backgroundColor,
      stroke: n.borderColor,
      "stroke-width": n.borderWidth,
    }),
    r
  );
}
function ne(e, t, n = !1) {
  const i = getComputedStyle(t),
    { offsetLeft: o, offsetTop: r } = R(e.nodes, t),
    s = document.createElementNS(A, "rect");
  C(s, {
    x: o + "",
    y: r + "",
    rx: i.borderRadius,
    ry: i.borderRadius,
    width: i.width,
    height: i.height,
    fill: i.backgroundColor,
    stroke: i.borderColor,
    "stroke-width": i.borderWidth,
  });
  const a = document.createElementNS(A, "g");
  let l;
  return (
    a.appendChild(s),
    (l = n ? eo(t, i, o, r) : Qn(t, i, o, r)),
    a.appendChild(l),
    a
  );
}
function no(e, t) {
  const n = getComputedStyle(t),
    { offsetLeft: i, offsetTop: o } = R(e.nodes, t),
    r = document.createElementNS(A, "a"),
    s = document.createElementNS(A, "text");
  return (
    C(s, {
      x: i + "",
      y: o + parseInt(n.fontSize) + "",
      "text-anchor": "start",
      "font-family": n.fontFamily,
      "font-size": `${n.fontSize}`,
      "font-weight": `${n.fontWeight}`,
      fill: `${n.color}`,
    }),
    (s.innerHTML = t.textContent),
    r.appendChild(s),
    r.setAttribute("href", t.href),
    r
  );
}
function oo(e, t) {
  const n = getComputedStyle(t),
    { offsetLeft: i, offsetTop: o } = R(e.nodes, t),
    r = document.createElementNS(A, "image");
  return (
    C(r, {
      x: i + "",
      y: o + "",
      width: n.width + "",
      height: n.height + "",
      href: t.src,
    }),
    r
  );
}
const oe = 100,
  io =
    '<?xml version="1.0" standalone="no"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">',
  so = (e, t = !1) => {
    var n, i, o;
    const r = e.nodes,
      s = r.offsetHeight + 200,
      a = r.offsetWidth + 200,
      l = Jn(s + "px", a + "px"),
      c = document.createElementNS(A, "svg"),
      d = document.createElementNS(A, "rect");
    C(d, {
      x: "0",
      y: "0",
      width: `${a}`,
      height: `${s}`,
      fill: e.theme.cssVar["--bgcolor"],
    }),
      l.appendChild(d),
      r.querySelectorAll(".subLines").forEach((e) => {
        const t = e.cloneNode(!0),
          { offsetLeft: n, offsetTop: i } = R(r, e.parentElement);
        t.setAttribute("x", `${n}`),
          t.setAttribute("y", `${i}`),
          c.appendChild(t);
      });
    const h =
      null == (n = r.querySelector(".lines")) ? void 0 : n.cloneNode(!0);
    h && c.appendChild(h);
    const p =
      null == (i = r.querySelector(".topiclinks")) ? void 0 : i.cloneNode(!0);
    p && c.appendChild(p);
    const m =
      null == (o = r.querySelector(".summary")) ? void 0 : o.cloneNode(!0);
    return (
      m && c.appendChild(m),
      r.querySelectorAll("me-tpc").forEach((n) => {
        n.nodeObj.dangerouslySetInnerHTML
          ? c.appendChild(ne(e, n, !t))
          : (c.appendChild(to(e, n)), c.appendChild(ne(e, n.text, !t)));
      }),
      r.querySelectorAll(".tags > span").forEach((t) => {
        c.appendChild(ne(e, t));
      }),
      r.querySelectorAll(".icons > span").forEach((t) => {
        c.appendChild(ne(e, t));
      }),
      r.querySelectorAll(".hyper-link").forEach((t) => {
        c.appendChild(no(e, t));
      }),
      r.querySelectorAll("img").forEach((t) => {
        c.appendChild(oo(e, t));
      }),
      C(c, { x: "100", y: "100", overflow: "visible" }),
      l.appendChild(c),
      l
    );
  },
  ro = (e, t) => (
    t && e.insertAdjacentHTML("afterbegin", "<style>" + t + "</style>"),
    io + e.outerHTML
  );
function co(e) {
  return new Promise((t, n) => {
    const i = new FileReader();
    (i.onload = (e) => {
      t(e.target.result);
    }),
      (i.onerror = (e) => {
        n(e);
      }),
      i.readAsDataURL(e);
  });
}
const lo = function (e = !1, t) {
    const n = so(this, e),
      i = ro(n, t);
    return new Blob([i], { type: "image/svg+xml" });
  },
  ao = async function (e = !1, t) {
    const n = this.exportSvg(e, t),
      i = await co(n);
    return new Promise((e, t) => {
      const n = new Image();
      n.setAttribute("crossOrigin", "anonymous"),
        (n.onload = () => {
          const t = document.createElement("canvas");
          (t.width = n.width),
            (t.height = n.height),
            t.getContext("2d").drawImage(n, 0, 0),
            t.toBlob(e, "image/png", 1);
        }),
        (n.src = i),
        (n.onerror = t);
    });
  },
  ho = Object.freeze(
    Object.defineProperty(
      { __proto__: null, exportPng: ao, exportSvg: lo },
      Symbol.toStringTag,
      { value: "Module" }
    )
  );
function uo(e, t) {
  return async function (...n) {
    const i = this.before[t];
    (i && !(await i.apply(this, n))) || e.apply(this, n);
  };
}
const Pe = Object.keys(Je),
  tt = {};
for (let e = 0; e < Pe.length; e++) {
  const t = Pe[e];
  tt[t] = uo(Je[t], t);
}
const fo = {
  getObjById: se,
  generateNewObj: nt,
  layout: st,
  linkDiv: pt,
  editTopic: ut,
  createWrapper: lt,
  createParent: at,
  createChildren: dt,
  createTopic: ht,
  findEle: S,
  changeTheme: Bt,
  ...Mn,
  ...tt,
  ...Bn,
  ...Gn,
  ...ho,
  init(e) {
    if (!(e = JSON.parse(JSON.stringify(e))) || !e.nodeData) {
      return new Error("MindElixir: `data` is required");
    }
    void 0 !== e.direction && (this.direction = e.direction),
      this.changeTheme(e.theme || this.theme, !1),
      (this.nodeData = e.nodeData),
      B(this.nodeData),
      (this.arrows = e.arrows || []),
      (this.summaries = e.summaries || []),
      this.tidyArrow(),
      this.toolBar && kt(this),
      this.keypress && wt(this),
      this.editable && Pt(this),
      this.contextMenu &&
        this.disposable.push(mt(this, this.contextMenuOption)),
      this.draggable && Ct(this),
      this.allowUndo && _t(this),
      this.toCenter(),
      this.layout(),
      this.linkDiv();
  },
  destroy() {
    var e;
    this.disposable.forEach((e) => e()),
      this.mindElixirBox && (this.mindElixirBox.innerHTML = ""),
      (this.mindElixirBox = void 0),
      (this.nodeData = void 0),
      (this.arrows = void 0),
      (this.summaries = void 0),
      (this.currentArrow = void 0),
      (this.currentNode = void 0),
      (this.currentNodes = void 0),
      (this.currentSummary = void 0),
      (this.waitCopy = void 0),
      (this.theme = void 0),
      (this.direction = void 0),
      (this.bus = void 0),
      (this.container = void 0),
      (this.map = void 0),
      (this.lines = void 0),
      (this.linkController = void 0),
      (this.linkSvgGroup = void 0),
      (this.P2 = void 0),
      (this.P3 = void 0),
      (this.line1 = void 0),
      (this.line2 = void 0),
      (this.nodes = void 0),
      null == (e = this.selection) || e.destroy(),
      (this.selection = void 0);
  },
};
function po({
  pT: e,
  pL: t,
  pW: n,
  pH: i,
  cT: o,
  cL: r,
  cW: s,
  cH: a,
  direction: l,
  containerHeight: c,
}) {
  let d = t + n / 2;
  const h = e + i / 2;
  let p;
  p = l === L.LHS ? r + s : r;
  const m = o + a / 2,
    u = 0.25 * (1 - Math.abs(m - h) / c) * (n / 2);
  return (
    (d = l === L.LHS ? d - n / 10 - u : d + n / 10 + u),
    `M ${d} ${h} Q ${d} ${m} ${p} ${m}`
  );
}
function mo({
  pT: e,
  pL: t,
  pW: n,
  pH: i,
  cT: o,
  cL: r,
  cW: s,
  cH: a,
  direction: l,
  isFirst: c,
}) {
  const d = parseInt(this.container.style.getPropertyValue("--gap"));
  let h = 0,
    p = 0;
  h = c ? e + i / 2 : e + i;
  const m = o + a;
  let u = 0,
    f = 0,
    g = 0;
  const v = (Math.abs(h - m) / 300) * d;
  return l === L.LHS
    ? ((g = t),
      (u = g + d),
      (f = g - d),
      (p = r + d),
      `M ${u} ${h} C ${g} ${h} ${g + v} ${m} ${f} ${m} H ${p}`)
    : ((g = t + n),
      (u = g - d),
      (f = g + d),
      (p = r + s - d),
      `M ${u} ${h} C ${g} ${h} ${g - v} ${m} ${f} ${m} H ${p}`);
}
const go = "4.5.2",
  G = document;
function D({
  el: e,
  direction: t,
  locale: n,
  draggable: i,
  editable: o,
  contextMenu: r,
  contextMenuOption: s,
  toolBar: a,
  keypress: l,
  mouseSelectionButton: c,
  selectionContainer: d,
  before: h,
  newTopicName: p,
  allowUndo: m,
  generateMainBranch: u,
  generateSubBranch: f,
  overflowHidden: g,
  theme: v,
  alignment: b,
}) {
  let y = null;
  const x = Object.prototype.toString.call(e);
  if (
    ("[object HTMLDivElement]" === x
      ? (y = e)
      : "[object String]" === x && (y = document.querySelector(e)),
    !y)
  ) {
    throw new Error("MindElixir: el is not a valid element");
  }
  (y.style.position = "relative"),
    (y.innerHTML = ""),
    (this.mindElixirBox = y),
    (this.disposable = []),
    (this.before = h || {}),
    (this.locale = n || "en"),
    (this.contextMenuOption = s),
    (this.contextMenu = void 0 === r || r),
    (this.toolBar = void 0 === a || a),
    (this.keypress = void 0 === l || l),
    (this.mouseSelectionButton = c || 0),
    (this.direction = "number" === typeof t ? t : 1),
    (this.draggable = void 0 === i || i),
    (this.newTopicName = p || "new node"),
    (this.editable = void 0 === o || o),
    (this.allowUndo = void 0 !== m && m),
    (this.currentNode = null),
    (this.currentArrow = null),
    (this.scaleVal = 1),
    (this.tempDirection = null),
    (this.generateMainBranch = u || po),
    (this.generateSubBranch = f || mo),
    (this.overflowHidden = g || !1),
    (this.bus = it.create()),
    (this.container = G.createElement("div")),
    (this.selectionContainer = d || this.container),
    (this.container.className = "map-container");
  const N = window.matchMedia("(prefers-color-scheme: dark)");
  this.theme = v || (N.matches ? Re : Be);
  const M = G.createElement("div");
  (M.className = "map-canvas"),
    (this.map = M),
    this.map.setAttribute("tabindex", "0"),
    this.container.appendChild(this.map),
    this.mindElixirBox.appendChild(this.container),
    (this.nodes = G.createElement("me-nodes")),
    (this.nodes.className = "main-node-container"),
    (this.lines = J("lines")),
    (this.summarySvg = J("summary")),
    (this.linkController = J("linkcontroller")),
    (this.P2 = G.createElement("div")),
    (this.P3 = G.createElement("div")),
    (this.P2.className = this.P3.className = "circle"),
    (this.P2.style.display = this.P3.style.display = "none"),
    (this.line1 = Ne()),
    (this.line2 = Ne()),
    this.linkController.appendChild(this.line1),
    this.linkController.appendChild(this.line2),
    (this.linkSvgGroup = J("topiclinks")),
    (this.alignment = b ?? "root"),
    this.map.appendChild(this.nodes),
    this.overflowHidden ? (this.container.style.overflow = "hidden") : ot(this);
}
(D.prototype = fo),
  (D.LEFT = 0),
  (D.RIGHT = 1),
  (D.SIDE = 2),
  (D.THEME = Be),
  (D.DARK_THEME = Re),
  (D.version = go),
  (D.E = S),
  (D.new = (e) => ({
    nodeData: { id: U(), topic: e || "new topic", children: [] },
  })),
  (D.dragMoveHelper = k);
export { D as default };
//# sourceMappingURL=/sm/c4bd66d06defc7cfc787d12edd3791be2ca8cfbbeb1c3473b9d0e000f826d61a.map
